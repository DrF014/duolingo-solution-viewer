!function(){"use strict";const e="success",t="_duo-sv_-action_result_",n=["get_current_translation_challenge","get_current_listening_challenge","update_current_challenge_user_reference","get_comment_challenge","update_comment_challenge_user_reference"],c=["session_loaded","discussion_loaded","sound_played"];async function r(e){return new Promise((t,n)=>{chrome.runtime.sendMessage(e,e=>{chrome.runtime.lastError?n():t(e)})})}const s=()=>{},a=Array.isArray,o=e=>"object"==typeof e&&!!e&&!a(e),u=document.createElement("script");u.src=chrome.runtime.getURL("src/observer.js"),u.type="text/javascript",(document.head||document.documentElement).appendChild(u);const i=document.createElement("script");i.src=chrome.runtime.getURL("src/ui.js"),i.type="text/javascript",(document.head||document.documentElement).appendChild(i),window.addEventListener("message",a=>{if(a.source===window&&o(a.data))if("_duo-sv_-action_request_"===a.data.type){let c;const s=a.data.action||null;c=n.indexOf(s)>=0?r(a.data).then(t=>{if(!o(t)||e!==t.type)throw new Error;return t.value}):Promise.reject(),c.then(n=>{a.source.postMessage({type:t,action:s,result:e,value:n},"*")}).catch(()=>{a.source.postMessage({type:t,action:s,result:"failure"},"*")})}else if("_duo-sv_-ui_event_notification_"===a.data.type){const e=a.data.event||null;c.indexOf(e)>=0&&r(a.data).then(s).catch(s)}})}();
