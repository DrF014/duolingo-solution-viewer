!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o=function(e){try{return!!e()}catch(e){return!0}},a=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,c={f:s&&!u.call({1:2},1)?function(e){var n=s(this,e);return!!n&&n.enumerable}:u},l=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},f={}.toString,h=function(e){return f.call(e).slice(8,-1)},p="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==h(e)?p.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},y=function(e){return d(v(e))},g=function(e){return"object"==typeof e?null!==e:"function"==typeof e},m=function(e,n){if(!g(e))return e;var t,r;if(n&&"function"==typeof(t=e.toString)&&!g(r=t.call(e)))return r;if("function"==typeof(t=e.valueOf)&&!g(r=t.call(e)))return r;if(!n&&"function"==typeof(t=e.toString)&&!g(r=t.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,w=function(e,n){return b.call(e,n)},_=i.document,x=g(_)&&g(_.createElement),k=function(e){return x?_.createElement(e):{}},S=!a&&!o((function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a})),C=Object.getOwnPropertyDescriptor,O={f:a?C:function(e,n){if(e=y(e),n=m(n,!0),S)try{return C(e,n)}catch(e){}if(w(e,n))return l(!c.f.call(e,n),e[n])}},A=function(e){if(!g(e))throw TypeError(String(e)+" is not an object");return e},E=Object.defineProperty,j={f:a?E:function(e,n,t){if(A(e),n=m(n,!0),A(t),S)try{return E(e,n,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},P=a?function(e,n,t){return j.f(e,n,l(1,t))}:function(e,n,t){return e[n]=t,e},T=function(e,n){try{P(i,e,n)}catch(t){i[e]=n}return n},I="__core-js_shared__",M=i[I]||T(I,{}),K=Function.toString;"function"!=typeof M.inspectSource&&(M.inspectSource=function(e){return K.call(e)});var F,D,R,N=M.inspectSource,L=i.WeakMap,z="function"==typeof L&&/native code/.test(N(L)),B=t((function(e){(e.exports=function(e,n){return M[e]||(M[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),q=0,H=Math.random(),U=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++q+H).toString(36)},W=B("keys"),$=function(e){return W[e]||(W[e]=U(e))},V={},G=i.WeakMap;if(z){var Y=M.state||(M.state=new G),J=Y.get,Q=Y.has,X=Y.set;F=function(e,n){return n.facade=e,X.call(Y,e,n),n},D=function(e){return J.call(Y,e)||{}},R=function(e){return Q.call(Y,e)}}else{var Z=$("state");V[Z]=!0,F=function(e,n){return n.facade=e,P(e,Z,n),n},D=function(e){return w(e,Z)?e[Z]:{}},R=function(e){return w(e,Z)}}var ee={set:F,get:D,has:R,enforce:function(e){return R(e)?D(e):F(e,{})},getterFor:function(e){return function(n){var t;if(!g(n)||(t=D(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}}},ne=t((function(e){var n=ee.get,t=ee.enforce,r=String(String).split("String");(e.exports=function(e,n,o,a){var u,s=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof n||w(o,"name")||P(o,"name",n),(u=t(o)).source||(u.source=r.join("string"==typeof n?n:""))),e!==i?(s?!l&&e[n]&&(c=!0):delete e[n],c?e[n]=o:P(e,n,o)):c?e[n]=o:T(n,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&n(this).source||N(this)}))})),te=i,re=function(e){return"function"==typeof e?e:void 0},ie=function(e,n){return arguments.length<2?re(te[e])||re(i[e]):te[e]&&te[e][n]||i[e]&&i[e][n]},oe=Math.ceil,ae=Math.floor,ue=function(e){return isNaN(e=+e)?0:(e>0?ae:oe)(e)},se=Math.min,ce=function(e){return e>0?se(ue(e),9007199254740991):0},le=Math.max,fe=Math.min,he=function(e){return function(n,t,r){var i,o=y(n),a=ce(o.length),u=function(e,n){var t=ue(e);return t<0?le(t+n,0):fe(t,n)}(r,a);if(e&&t!=t){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((e||u in o)&&o[u]===t)return e||u||0;return!e&&-1}},pe={includes:he(!0),indexOf:he(!1)}.indexOf,de=function(e,n){var t,r=y(e),i=0,o=[];for(t in r)!w(V,t)&&w(r,t)&&o.push(t);for(;n.length>i;)w(r,t=n[i++])&&(~pe(o,t)||o.push(t));return o},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=ve.concat("length","prototype"),ge={f:Object.getOwnPropertyNames||function(e){return de(e,ye)}},me={f:Object.getOwnPropertySymbols},be=ie("Reflect","ownKeys")||function(e){var n=ge.f(A(e)),t=me.f;return t?n.concat(t(e)):n},we=function(e,n){for(var t=be(n),r=j.f,i=O.f,o=0;o<t.length;o++){var a=t[o];w(e,a)||r(e,a,i(n,a))}},_e=/#|\.prototype\./,xe=function(e,n){var t=Se[ke(e)];return t==Oe||t!=Ce&&("function"==typeof n?o(n):!!n)},ke=xe.normalize=function(e){return String(e).replace(_e,".").toLowerCase()},Se=xe.data={},Ce=xe.NATIVE="N",Oe=xe.POLYFILL="P",Ae=xe,Ee=O.f,je=function(e,n){var t,r,o,a,u,s=e.target,c=e.global,l=e.stat;if(t=c?i:l?i[s]||T(s,{}):(i[s]||{}).prototype)for(r in n){if(a=n[r],o=e.noTargetGet?(u=Ee(t,r))&&u.value:t[r],!Ae(c?r:s+(l?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;we(a,o)}(e.sham||o&&o.sham)&&P(a,"sham",!0),ne(t,r,a,e)}},Pe=Array.isArray||function(e){return"Array"==h(e)},Te=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Ie=function(e,n,t){if(Te(e),void 0===n)return e;switch(t){case 0:return function(){return e.call(n)};case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,i){return e.call(n,t,r,i)}}return function(){return e.apply(n,arguments)}},Me=function(e,n,t,r,i,o,a,u){for(var s,c=i,l=0,f=!!a&&Ie(a,u,3);l<r;){if(l in t){if(s=f?f(t[l],l,n):t[l],o>0&&Pe(s))c=Me(e,n,s,ce(s.length),c,o-1)-1;else{if(c>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[c]=s}c++}l++}return c},Ke=Me,Fe=function(e){return Object(v(e))},De=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Re=De&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ne=B("wks"),Le=i.Symbol,ze=Re?Le:Le&&Le.withoutSetter||U,Be=function(e){return w(Ne,e)||(De&&w(Le,e)?Ne[e]=Le[e]:Ne[e]=ze("Symbol."+e)),Ne[e]},qe=Be("species"),He=function(e,n){var t;return Pe(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Pe(t.prototype)?g(t)&&null===(t=t[qe])&&(t=void 0):t=void 0),new(void 0===t?Array:t)(0===n?0:n)};je({target:"Array",proto:!0},{flatMap:function(e){var n,t=Fe(this),r=ce(t.length);return Te(e),(n=He(t,0)).length=Ke(n,t,t,r,0,1,e,arguments.length>1?arguments[1]:void 0),n}});var Ue,We=Object.keys||function(e){return de(e,ve)},$e=a?Object.defineProperties:function(e,n){A(e);for(var t,r=We(n),i=r.length,o=0;i>o;)j.f(e,t=r[o++],n[t]);return e},Ve=ie("document","documentElement"),Ge=$("IE_PROTO"),Ye=function(){},Je=function(e){return"<script>"+e+"</"+"script>"},Qe=function(){try{Ue=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,n;Qe=Ue?function(e){e.write(Je("")),e.close();var n=e.parentWindow.Object;return e=null,n}(Ue):((n=k("iframe")).style.display="none",Ve.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(Je("document.F=Object")),e.close(),e.F);for(var t=ve.length;t--;)delete Qe.prototype[ve[t]];return Qe()};V[Ge]=!0;var Xe=Object.create||function(e,n){var t;return null!==e?(Ye.prototype=A(e),t=new Ye,Ye.prototype=null,t[Ge]=e):t=Qe(),void 0===n?t:$e(t,n)},Ze=Be("unscopables"),en=Array.prototype;null==en[Ze]&&j.f(en,Ze,{configurable:!0,value:Xe(null)});var nn;nn="flatMap",en[Ze][nn]=!0;var tn=Function.call,rn=function(e,n,t){return Ie(tn,i[e].prototype[n],t)};rn("Array","flatMap");var on,an,un,sn=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),cn=$("IE_PROTO"),ln=Object.prototype,fn=sn?Object.getPrototypeOf:function(e){return e=Fe(e),w(e,cn)?e[cn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ln:null},hn=Be("iterator"),pn=!1;[].keys&&("next"in(un=[].keys())?(an=fn(fn(un)))!==Object.prototype&&(on=an):pn=!0),null==on&&(on={}),w(on,hn)||P(on,hn,(function(){return this}));var dn={IteratorPrototype:on,BUGGY_SAFARI_ITERATORS:pn},vn=j.f,yn=Be("toStringTag"),gn=function(e,n,t){e&&!w(e=t?e:e.prototype,yn)&&vn(e,yn,{configurable:!0,value:n})},mn=dn.IteratorPrototype,bn=Be("match"),wn=function(e){var n;return g(e)&&(void 0!==(n=e[bn])?!!n:"RegExp"==h(e))},_n=function(){var e=A(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n},xn=Be("species"),kn=function(e){return function(n,t){var r,i,o=String(v(n)),a=ue(t),u=o.length;return a<0||a>=u?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Sn={codeAt:kn(!1),charAt:kn(!0)}.charAt,Cn=Be("matchAll"),On="RegExp String",An="RegExp String Iterator",En=ee.set,jn=ee.getterFor(An),Pn=RegExp.prototype,Tn=Pn.exec,In="".matchAll,Mn=!!In&&!o((function(){"a".matchAll(/./)})),Kn=function(e,n,t){var r=n+" Iterator";return e.prototype=Xe(mn,{next:l(1,t)}),gn(e,r,!1),e}((function(e,n,t,r){En(this,{type:An,regexp:e,string:n,global:t,unicode:r,done:!1})}),On,(function(){var e=jn(this);if(e.done)return{value:void 0,done:!0};var n=e.regexp,t=e.string,r=function(e,n){var t,r=e.exec;if("function"==typeof r){if("object"!=typeof(t=r.call(e,n)))throw TypeError("Incorrect exec result");return t}return Tn.call(e,n)}(n,t);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(n.lastIndex=function(e,n,t){return n+(t?Sn(e,n).length:1)}(t,ce(n.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),Fn=function(e){var n,t,r,i,o,a,u=A(this),s=String(e);return n=function(e,n){var t,r=A(e).constructor;return void 0===r||null==(t=A(r)[xn])?n:Te(t)}(u,RegExp),void 0===(t=u.flags)&&u instanceof RegExp&&!("flags"in Pn)&&(t=_n.call(u)),r=void 0===t?"":String(t),i=new n(n===RegExp?u.source:u,r),o=!!~r.indexOf("g"),a=!!~r.indexOf("u"),i.lastIndex=ce(u.lastIndex),new Kn(i,s,o,a)};je({target:"String",proto:!0,forced:Mn},{matchAll:function(e){var n,t,r=v(this);if(null!=e){if(wn(e)&&!~String(v("flags"in Pn?e.flags:_n.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(Mn)return In.apply(r,arguments);if(null!=(t=e[Cn]))return Te(t).call(e,r)}else if(Mn)return In.apply(r,arguments);return n=String(r),new RegExp(e,"g")[Cn](n)}}),Cn in Pn||P(Pn,Cn,Fn),rn("String","matchAll");var Dn=function(){return(Dn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function Rn(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;var r=Array(e),i=0;for(n=0;n<t;n++)for(var o=arguments[n],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r}var Nn=Object.keys,Ln=Array.isArray,zn="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function Bn(e,n){return"object"!=typeof n||Nn(n).forEach((function(t){e[t]=n[t]})),e}"undefined"==typeof Promise||zn.Promise||(zn.Promise=Promise);var qn=Object.getPrototypeOf,Hn={}.hasOwnProperty;function Un(e,n){return Hn.call(e,n)}function Wn(e,n){"function"==typeof n&&(n=n(qn(e))),Nn(n).forEach((function(t){Vn(e,t,n[t])}))}var $n=Object.defineProperty;function Vn(e,n,t,r){$n(e,n,Bn(t&&Un(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function Gn(e){return{from:function(n){return e.prototype=Object.create(n.prototype),Vn(e.prototype,"constructor",e),{extend:Wn.bind(null,e.prototype)}}}}var Yn=Object.getOwnPropertyDescriptor;function Jn(e,n){var t;return Yn(e,n)||(t=qn(e))&&Jn(t,n)}var Qn=[].slice;function Xn(e,n,t){return Qn.call(e,n,t)}function Zn(e,n){return n(e)}function et(e){if(!e)throw new Error("Assertion Failed")}function nt(e){zn.setImmediate?setImmediate(e):setTimeout(e,0)}function tt(e,n){return e.reduce((function(e,t,r){var i=n(t,r);return i&&(e[i[0]]=i[1]),e}),{})}function rt(e,n){if(Un(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var t=[],r=0,i=n.length;r<i;++r){var o=rt(e,n[r]);t.push(o)}return t}var a=n.indexOf(".");if(-1!==a){var u=e[n.substr(0,a)];return void 0===u?void 0:rt(u,n.substr(a+1))}}function it(e,n,t){if(e&&void 0!==n&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof n&&"length"in n){et("string"!=typeof t&&"length"in t);for(var r=0,i=n.length;r<i;++r)it(e,n[r],t[r])}else{var o=n.indexOf(".");if(-1!==o){var a=n.substr(0,o),u=n.substr(o+1);if(""===u)void 0===t?Ln(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=t;else{var s=e[a];s||(s=e[a]={}),it(s,u,t)}}else void 0===t?Ln(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function ot(e,n){"string"==typeof n?it(e,n,void 0):"length"in n&&[].map.call(n,(function(n){it(e,n,void 0)}))}function at(e){var n={};for(var t in e)Un(e,t)&&(n[t]=e[t]);return n}var ut=[].concat;function st(e){return ut.apply([],e)}var ct="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(st([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(n){return n+e+"Array"}))})))).filter((function(e){return zn[e]})),lt=ct.map((function(e){return zn[e]})),ft=tt(ct,(function(e){return[e,!0]}));function ht(e){if(!e||"object"!=typeof e)return e;var n;if(Ln(e)){n=[];for(var t=0,r=e.length;t<r;++t)n.push(ht(e[t]))}else if(lt.indexOf(e.constructor)>=0)n=e;else for(var i in n=e.constructor?Object.create(e.constructor.prototype):{},e)Un(e,i)&&(n[i]=ht(e[i]));return n}var pt={}.toString;function dt(e){return pt.call(e).slice(8,-1)}var vt=function(e,n){return"Array"===n?""+e.map((function(e){return vt(e,dt(e))})):"ArrayBuffer"===n?""+new Uint8Array(e):"Date"===n?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function yt(e,n,t,r){return t=t||{},r=r||"",Nn(e).forEach((function(i){if(Un(n,i)){var o=e[i],a=n[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var u=dt(o),s=dt(a);u===s?ft[u]?vt(o,u)!==vt(a,s)&&(t[r+i]=n[i]):yt(o,a,t,r+i+"."):t[r+i]=n[i]}else o!==a&&(t[r+i]=n[i])}else t[r+i]=void 0})),Nn(n).forEach((function(i){Un(e,i)||(t[r+i]=n[i])})),t}var gt="undefined"!=typeof Symbol&&Symbol.iterator,mt=gt?function(e){var n;return null!=e&&(n=e[gt])&&n.apply(e)}:function(){return null},bt={};function wt(e){var n,t,r,i;if(1===arguments.length){if(Ln(e))return e.slice();if(this===bt&&"string"==typeof e)return[e];if(i=mt(e)){for(t=[];!(r=i.next()).done;)t.push(r.value);return t}if(null==e)return[e];if("number"==typeof(n=e.length)){for(t=new Array(n);n--;)t[n]=e[n];return t}return[e]}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var _t="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},xt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function kt(e,n){xt=e,St=n}var St=function(){return!0},Ct=!new Error("").stack;function Ot(){if(Ct)try{throw new Error}catch(e){return e}return new Error}function At(e,n){var t=e.stack;return t?(n=n||0,0===t.indexOf(e.name)&&(n+=(e.name+e.message).split("\n").length),t.split("\n").slice(n).filter(St).map((function(e){return"\n"+e})).join("")):""}var Et=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],jt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Et),Pt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Tt(e,n){this._e=Ot(),this.name=e,this.message=n}function It(e,n){return e+". Errors: "+Object.keys(n).map((function(e){return n[e].toString()})).filter((function(e,n,t){return t.indexOf(e)===n})).join("\n")}function Mt(e,n,t,r){this._e=Ot(),this.failures=n,this.failedKeys=r,this.successCount=t,this.message=It(e,n)}function Kt(e,n){this._e=Ot(),this.name="BulkError",this.failures=n,this.message=It(e,n)}Gn(Tt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+At(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Gn(Mt).from(Tt),Gn(Kt).from(Tt);var Ft=jt.reduce((function(e,n){return e[n]=n+"Error",e}),{}),Dt=Tt,Rt=jt.reduce((function(e,n){var t=n+"Error";function r(e,r){this._e=Ot(),this.name=t,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Pt[n]||t,this.inner=null)}return Gn(r).from(Dt),e[n]=r,e}),{});Rt.Syntax=SyntaxError,Rt.Type=TypeError,Rt.Range=RangeError;var Nt=Et.reduce((function(e,n){return e[n+"Error"]=Rt[n],e}),{});var Lt=jt.reduce((function(e,n){return-1===["Syntax","Type","Range"].indexOf(n)&&(e[n+"Error"]=Rt[n]),e}),{});function zt(){}function Bt(e){return e}function qt(e,n){return null==e||e===Bt?n:function(t){return n(e(t))}}function Ht(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function Ut(e,n){return e===zt?n:function(){var t=e.apply(this,arguments);void 0!==t&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ht(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ht(i,this.onerror):i),void 0!==o?o:t}}function Wt(e,n){return e===zt?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?Ht(t,this.onsuccess):t),r&&(this.onerror=this.onerror?Ht(r,this.onerror):r)}}function $t(e,n){return e===zt?n:function(t){var r=e.apply(this,arguments);Bn(t,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ht(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ht(o,this.onerror):o),void 0===r?void 0===a?void 0:a:Bn(r,a)}}function Vt(e,n){return e===zt?n:function(){return!1!==n.apply(this,arguments)&&e.apply(this,arguments)}}function Gt(e,n){return e===zt?n:function(){var t=e.apply(this,arguments);if(t&&"function"==typeof t.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return t.then((function(){return n.apply(r,o)}))}return n.apply(this,arguments)}}Lt.ModifyError=Mt,Lt.DexieError=Tt,Lt.BulkError=Kt;var Yt={},Jt="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,n.__proto__,e]}(),Qt=Jt[0],Xt=Jt[1],Zt=Jt[2],er=Xt&&Xt.then,nr=Qt&&Qt.constructor,tr=!!Zt,rr=!1,ir=Zt?function(){Zt.then(Or)}:zn.setImmediate?setImmediate.bind(null,Or):zn.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Or(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Or,0)},or=function(e,n){dr.push([e,n]),ur&&(ir(),ur=!1)},ar=!0,ur=!0,sr=[],cr=[],lr=null,fr=Bt,hr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{Qr(e[0],e[1])}catch(e){}}))}},pr=hr,dr=[],vr=0,yr=[];function gr(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=zt,this._lib=!1;var n=this._PSD=pr;if(xt&&(this._stackHolder=Ot(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Yt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&_r(this,this._value))}this._state=null,this._value=null,++n.ref,wr(this,e)}var mr={get:function(){var e=pr,n=Dr;function t(t,r){var i=this,o=!e.global&&(e!==pr||n!==Dr),a=o&&!zr(),u=new gr((function(n,u){kr(i,new br(Gr(t,e,o,a),Gr(r,e,o,a),n,u,e))}));return xt&&Cr(u,this),u}return t.prototype=Yt,t},set:function(e){Vn(this,"then",e&&e.prototype===Yt?mr:{get:function(){return e},set:mr.set})}};function br(e,n,t,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=r,this.psd=i}function wr(e,n){try{n((function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var t=e._lib&&Ar();n&&"function"==typeof n.then?wr(e,(function(e,t){n instanceof gr?n._then(e,t):n.then(e,t)})):(e._state=!0,e._value=n,xr(e)),t&&Er()}}),_r.bind(null,e))}catch(n){_r(e,n)}}function _r(e,n){if(cr.push(n),null===e._state){var t=e._lib&&Ar();n=fr(n),e._state=!1,e._value=n,xt&&null!==n&&"object"==typeof n&&!n._promise&&function(e,n,t){try{e.apply(null,t)}catch(e){n&&n(e)}}((function(){var t=Jn(n,"stack");n._promise=e,Vn(n,"stack",{get:function(){return rr?t&&(t.get?t.get.apply(n):t.value):e.stack}})})),function(e){sr.some((function(n){return n._value===e._value}))||sr.push(e)}(e),xr(e),t&&Er()}}function xr(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t)kr(e,n[t]);var i=e._PSD;--i.ref||i.finalize(),0===vr&&(++vr,or((function(){0==--vr&&jr()}),[]))}function kr(e,n){if(null!==e._state){var t=e._state?n.onFulfilled:n.onRejected;if(null===t)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++vr,or(Sr,[t,e,n])}else e._listeners.push(n)}function Sr(e,n,t){try{lr=n;var r,i=n._value;n._state?r=e(i):(cr.length&&(cr=[]),r=e(i),-1===cr.indexOf(i)&&function(e){var n=sr.length;for(;n;)if(sr[--n]._value===e._value)return void sr.splice(n,1)}(n)),t.resolve(r)}catch(e){t.reject(e)}finally{lr=null,0==--vr&&jr(),--t.psd.ref||t.psd.finalize()}}function Cr(e,n){var t=n?n._numPrev+1:0;t<100&&(e._prev=n,e._numPrev=t)}function Or(){Ar()&&Er()}function Ar(){var e=ar;return ar=!1,ur=!1,e}function Er(){var e,n,t;do{for(;dr.length>0;)for(e=dr,dr=[],t=e.length,n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}}while(dr.length>0);ar=!0,ur=!0}function jr(){var e=sr;sr=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var n=yr.slice(0),t=n.length;t;)n[--t]()}function Pr(e){return new gr(Yt,!1,e)}function Tr(e,n){var t=pr;return function(){var r=Ar(),i=pr;try{return Ur(t,!0),e.apply(this,arguments)}catch(e){n&&n(e)}finally{Ur(i,!1),r&&Er()}}}Wn(gr.prototype,{then:mr,_then:function(e,n){kr(this,new br(null,null,e,n,pr))},catch:function(e){if(1===arguments.length)return this.then(null,e);var n=arguments[0],t=arguments[1];return"function"==typeof n?this.then(null,(function(e){return e instanceof n?t(e):Pr(e)})):this.then(null,(function(e){return e&&e.name===n?t(e):Pr(e)}))},finally:function(e){return this.then((function(n){return e(),n}),(function(n){return e(),Pr(n)}))},stack:{get:function(){if(this._stack)return this._stack;try{rr=!0;var e=function e(n,t,r){if(t.length===r)return t;var i="";if(!1===n._state){var o,a,u=n._value;null!=u?(o=u.name||"Error",a=u.message||u,i=At(u,0)):(o=u,a=""),t.push(o+(a?": "+a:"")+i)}xt&&((i=At(n._stackHolder,2))&&-1===t.indexOf(i)&&t.push(i),n._prev&&e(n._prev,t,r));return t}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{rr=!1}}},timeout:function(e,n){var t=this;return e<1/0?new gr((function(r,i){var o=setTimeout((function(){return i(new Rt.Timeout(n))}),e);t.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&Vn(gr.prototype,Symbol.toStringTag,"Dexie.Promise"),hr.env=Wr(),Wn(gr,{all:function(){var e=wt.apply(null,arguments).map(Br);return new gr((function(n,t){0===e.length&&n([]);var r=e.length;e.forEach((function(i,o){return gr.resolve(i).then((function(t){e[o]=t,--r||n(e)}),t)}))}))},resolve:function(e){if(e instanceof gr)return e;if(e&&"function"==typeof e.then)return new gr((function(n,t){e.then(n,t)}));var n=new gr(Yt,!0,e);return Cr(n,lr),n},reject:Pr,race:function(){var e=wt.apply(null,arguments).map(Br);return new gr((function(n,t){e.map((function(e){return gr.resolve(e).then(n,t)}))}))},PSD:{get:function(){return pr},set:function(e){return pr=e}},totalEchoes:{get:function(){return Dr}},newPSD:Nr,usePSD:$r,scheduler:{get:function(){return or},set:function(e){or=e}},rejectionMapper:{get:function(){return fr},set:function(e){fr=e}},follow:function(e,n){return new gr((function(t,r){return Nr((function(n,t){var r=pr;r.unhandleds=[],r.onunhandled=t,r.finalize=Ht((function(){var e=this;!function(e){function n(){e(),yr.splice(yr.indexOf(n),1)}yr.push(n),++vr,or((function(){0==--vr&&jr()}),[])}((function(){0===e.unhandleds.length?n():t(e.unhandleds[0])}))}),r.finalize),e()}),n,t,r)}))}}),nr&&(nr.allSettled&&Vn(gr,"allSettled",(function(){var e=wt.apply(null,arguments).map(Br);return new gr((function(n){0===e.length&&n([]);var t=e.length,r=new Array(t);e.forEach((function(e,i){return gr.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--t||n(r)}))}))}))})),nr.any&&"undefined"!=typeof AggregateError&&Vn(gr,"any",(function(){var e=wt.apply(null,arguments).map(Br);return new gr((function(n,t){0===e.length&&t(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return gr.resolve(e).then((function(e){return n(e)}),(function(e){i[o]=e,--r||t(new AggregateError(i))}))}))}))})));var Ir={awaits:0,echoes:0,id:0},Mr=0,Kr=[],Fr=0,Dr=0,Rr=0;function Nr(e,n,t,r){var i=pr,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Rr;var a=hr.env;o.env=tr?{Promise:gr,PromiseProp:{value:gr,configurable:!0,writable:!0},all:gr.all,race:gr.race,allSettled:gr.allSettled,any:gr.any,resolve:gr.resolve,reject:gr.reject,nthen:Yr(a.nthen,o),gthen:Yr(a.gthen,o)}:{},n&&Bn(o,n),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=$r(o,e,t,r);return 0===o.ref&&o.finalize(),u}function Lr(){return Ir.id||(Ir.id=++Mr),++Ir.awaits,Ir.echoes+=100,Ir.id}function zr(){return!!Ir.awaits&&(0==--Ir.awaits&&(Ir.id=0),Ir.echoes=100*Ir.awaits,!0)}function Br(e){return Ir.echoes&&e&&e.constructor===nr?(Lr(),e.then((function(e){return zr(),e}),(function(e){return zr(),Xr(e)}))):e}function qr(e){++Dr,Ir.echoes&&0!=--Ir.echoes||(Ir.echoes=Ir.id=0),Kr.push(pr),Ur(e,!0)}function Hr(){var e=Kr[Kr.length-1];Kr.pop(),Ur(e,!1)}function Ur(e,n){var t=pr;if((n?!Ir.echoes||Fr++&&e===pr:!Fr||--Fr&&e===pr)||Vr(n?qr.bind(null,e):Hr),e!==pr&&(pr=e,t===hr&&(hr.env=Wr()),tr)){var r=hr.env.Promise,i=e.env;Xt.then=i.nthen,r.prototype.then=i.gthen,(t.global||e.global)&&(Object.defineProperty(zn,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Wr(){var e=zn.Promise;return tr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(zn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Xt.then,gthen:e.prototype.then}:{}}function $r(e,n,t,r,i){var o=pr;try{return Ur(e,!0),n(t,r,i)}finally{Ur(o,!1)}}function Vr(e){er.call(Qt,e)}function Gr(e,n,t,r){return"function"!=typeof e?e:function(){var i=pr;t&&Lr(),Ur(n,!0);try{return e.apply(this,arguments)}finally{Ur(i,!1),r&&Vr(zr)}}}function Yr(e,n){return function(t,r){return e.call(this,Gr(t,n),Gr(r,n))}}-1===(""+er).indexOf("[native code]")&&(Lr=zr=zt);var Jr="unhandledrejection";function Qr(e,n){var t;try{t=n.onuncatched(e)}catch(e){}if(!1!==t)try{var r,i={promise:n,reason:e};if(zn.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Jr,!0,!0),Bn(r,i)):zn.CustomEvent&&Bn(r=new CustomEvent(Jr,{detail:i}),i),r&&zn.dispatchEvent&&(dispatchEvent(r),!zn.PromiseRejectionEvent&&zn.onunhandledrejection))try{zn.onunhandledrejection(r)}catch(e){}xt&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Xr=gr.reject;var Zr="3.0.3",ei=String.fromCharCode(65535),ni=-1/0,ti="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ri="String expected.",ii=[],oi="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ai=oi,ui=oi,si=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},ci="__dbnames",li="readonly",fi="readwrite";function hi(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var pi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function di(e){return function(n){return void 0===rt(n,e)&&ot(n=ht(n),e),n}}var vi=function(){function e(){}return e.prototype._trans=function(e,n,t){var r=this._tx||pr.trans,i=this.name;function o(e,t,r){if(!r.schema[i])throw new Rt.NotFound("Table "+i+" not part of transaction");return n(r.idbtrans,r)}var a=Ar();try{return r&&r.db===this.db?r===pr.trans?r._promise(e,o,t):Nr((function(){return r._promise(e,o,t)}),{trans:r,transless:pr.transless||pr}):function e(n,t,r,i){if(n._state.openComplete||pr.letThrough){var o=n._createTransaction(t,r,n._dbSchema);try{o.create()}catch(e){return Xr(e)}return o._promise(t,(function(e,n){return Nr((function(){return pr.trans=o,i(e,n,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!n._state.isBeingOpened){if(!n._options.autoOpen)return Xr(new Rt.DatabaseClosed);n.open().catch(zt)}return n._state.dbReadyPromise.then((function(){return e(n,t,r,i)}))}(this.db,e,[this.name],o)}finally{a&&Er()}},e.prototype.get=function(e,n){var t=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",(function(n){return t.core.get({trans:n,key:e}).then((function(e){return t.hook.reading.fire(e)}))})).then(n)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Ln(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=Nn(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&n.every((function(n){return e.keyPath.indexOf(n)>=0}))&&e.keyPath.every((function(e){return n.indexOf(e)>=0}))}))[0];if(t&&this.db._maxKey!==ei)return this.where(t.name).equals(t.keyPath.map((function(n){return e[n]})));!t&&xt&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,n){try{return 0===i.cmp(e,n)}catch(e){return!1}}var a=n.reduce((function(n,t){var i=n[0],a=n[1],u=r[t],s=e[t];return[i||u,i||!u?hi(a,u&&u.multi?function(e){var n=rt(e,t);return Ln(n)&&n.some((function(e){return o(s,e)}))}:function(e){return o(s,rt(e,t))}):a]}),[null,null]),u=a[0],s=a[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(s):t?this.filter(s):this.where(n).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,Ln(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(n){if(!n)return n;var t=Object.create(e.prototype);for(var r in n)if(Un(n,r))try{t[r]=n[r]}catch(e){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){Bn(this,e)}))},e.prototype.add=function(e,n){var t=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=di(o)(e)),this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"add",keys:null!=n?[n]:null,values:[a]})})).then((function(e){return e.numFailures?gr.reject(e.failures[0]):e.lastResult})).then((function(n){if(o)try{it(e,o,n)}catch(e){}return n}))},e.prototype.update=function(e,n){if("object"!=typeof n||Ln(n))throw new Rt.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Ln(e))return this.where(":id").equals(e).modify(n);Nn(n).forEach((function(t){it(e,t,n[t])}));var t=rt(e,this.schema.primKey.keyPath);return void 0===t?Xr(new Rt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(n)},e.prototype.put=function(e,n){var t=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=di(o)(e)),this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"put",values:[a],keys:null!=n?[n]:null})})).then((function(e){return e.numFailures?gr.reject(e.failures[0]):e.lastResult})).then((function(n){if(o)try{it(e,o,n)}catch(e){}return n}))},e.prototype.delete=function(e){var n=this;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?gr.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"deleteRange",range:pi})})).then((function(e){return e.numFailures?gr.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",(function(t){return n.core.getMany({keys:e,trans:t}).then((function(e){return e.map((function(e){return n.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,n,t){var r=this,i=Array.isArray(n)?n:void 0,o=(t=t||(i?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",(function(n){var t=r.schema.primKey,a=t.auto,u=t.keyPath;if(u&&i)throw new Rt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Rt.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(di(u)):e;return r.core.mutate({trans:n,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,a=e.failures;if(0===n)return o?t:i;throw new Kt(r.name+".bulkAdd(): "+n+" of "+s+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkPut=function(e,n,t){var r=this,i=Array.isArray(n)?n:void 0,o=(t=t||(i?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",(function(n){var t=r.schema.primKey,a=t.auto,u=t.keyPath;if(u&&i)throw new Rt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Rt.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(di(u)):e;return r.core.mutate({trans:n,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,a=e.failures;if(0===n)return o?t:i;throw new Kt(r.name+".bulkPut(): "+n+" of "+s+" operations failed",Object.keys(a).map((function(e){return a[e]})))}))}))},e.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new Kt(n.name+".bulkDelete(): "+r+" of "+t+" operations failed",o)}))},e}();function yi(e){var n={},t=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]};t.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return t;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=Vt),i||(i=zt);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(n){return n!==e})),o.fire=o.subscribers.reduce(r,i)}};return n[e]=t[e]=o,o}function a(e){Nn(e).forEach((function(n){var t=e[n];if(Ln(t))o(n,e[n][0],e[n][1]);else{if("asap"!==t)throw new Rt.InvalidArgument("Invalid event config");var r=o(n,Bt,(function(){for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];r.subscribers.forEach((function(e){nt((function(){e.apply(null,n)}))}))}))}}))}}function gi(e,n){return Gn(n).from({prototype:e}),n}function mi(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function bi(e,n){e.filter=hi(e.filter,n)}function wi(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return hi(r(),n())}:n,e.justLimit=t&&!r}function _i(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new Rt.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function xi(e,n,t){var r=_i(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function ki(e,n,t,r){var i=e.replayFilter?hi(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,t,r){if(!i||i(t,r,(function(e){return t.stop(e)}),(function(e){return t.fail(e)}))){var a=t.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),Un(o,u)||(o[u]=!0,n(e,t,r))}};return Promise.all([e.or._iterate(a,t),Si(xi(e,r,t),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Si(xi(e,r,t),hi(e.algorithm,i),n,!e.keysOnly&&e.valueMapper)}function Si(e,n,t,r){var i=Tr(r?function(e,n,i){return t(r(e),n,i)}:t);return e.then((function(e){if(e)return e.start((function(){var t=function(){return e.continue()};n&&!n(e,(function(e){return t=e}),(function(n){e.stop(n),t=zt}),(function(n){e.fail(n),t=zt}))||i(e.value,e,(function(e){return t=e})),t()}))}))}var Ci=function(){function e(){}return e.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,Xr.bind(null,t.error)):t.table._trans("readonly",e).then(n)},e.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,Xr.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=hi(n.algorithm,e)},e.prototype._iterate=function(e,n){return ki(this._ctx,e,n,this._ctx.table.core)},e.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&&Bn(t,e),n._ctx=t,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var n=this._ctx;return this._read((function(t){return ki(n,e,t,n.table.core)}))},e.prototype.count=function(e){var n=this;return this._read((function(e){var t=n._ctx,r=t.table.core;if(mi(t,!0))return r.count({trans:e,query:{index:_i(t,r.schema),range:t.range}}).then((function(e){return Math.min(e,t.limit)}));var i=0;return ki(t,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,n){var t=e.split(".").reverse(),r=t[0],i=t.length-1;function o(e,n){return n?o(e[t[n]],n-1):e[r]}var a="next"===this._ctx.dir?1:-1;function u(e,n){var t=o(e,i),r=o(n,i);return t<r?-a:t>r?a:0}return this.toArray((function(e){return e.sort(u)})).then(n)},e.prototype.toArray=function(e){var n=this;return this._read((function(e){var t=n._ctx;if("next"===t.dir&&mi(t,!0)&&t.limit>0){var r=t.valueMapper,i=_i(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:i,range:t.range}}).then((function(e){var n=e.result;return r?n.map(r):n}))}var o=[];return ki(t,(function(e){return o.push(e)}),e,t.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,mi(n)?wi(n,(function(){var n=e;return function(e,t){return 0===n||(1===n?(--n,!1):(t((function(){e.advance(n),n=0})),!1))}})):wi(n,(function(){var n=e;return function(){return--n<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wi(this._ctx,(function(){var n=e;return function(e,t,r){return--n<=0&&t(r),n>=0}}),!0),this},e.prototype.until=function(e,n){return bi(this._ctx,(function(t,r,i){return!e(t.value)||(r(i),n)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var n,t;return bi(this._ctx,(function(n){return e(n.value)})),n=this._ctx,t=e,n.isMatch=hi(n.isMatch,t),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,t){e(t.key,t)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,t){e(t.primaryKey,t)}))},e.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.key)})).then((function(){return t})).then(e)},e.prototype.primaryKeys=function(e){var n=this._ctx;if("next"===n.dir&&mi(n,!0)&&n.limit>0)return this._read((function(e){var t=_i(n,n.table.core.schema);return n.table.core.query({trans:e,values:!1,limit:n.limit,query:{index:t,range:n.range}})})).then((function(e){return e.result})).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.primaryKey)})).then((function(){return t})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var t={};return bi(this._ctx,(function(e){var n=e.primaryKey.toString(),r=Un(t,n);return t[n]=!0,!r})),this},e.prototype.modify=function(e){var n=this,t=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=Nn(e),a=o.length;i=function(n){for(var t=!1,r=0;r<a;++r){var i=o[r],u=e[i];rt(n,i)!==u&&(it(n,i,u),t=!0)}return t}}var u=t.table.core,s=u.schema.primaryKey,c=s.outbound,l=s.extractKey,f="testmode"in go?1:2e3,h=n.db.core.cmp,p=[],d=0,v=[],y=function(e,n){var t=n.failures,r=n.numFailures;d+=e-r;for(var i=0,o=Nn(t);i<o.length;i++){var a=o[i];p.push(t[a])}};return n.clone().primaryKeys().then((function(e){var n=function(t){var o=Math.min(f,e.length-t);return u.getMany({trans:r,keys:e.slice(t,t+o)}).then((function(a){for(var s=[],p=[],d=c?[]:null,v=[],g=0;g<o;++g){var m=a[g],b={value:ht(m),primKey:e[t+g]};!1!==i.call(b,b.value,b)&&(null==b.value?v.push(e[t+g]):c||0===h(l(m),l(b.value))?(p.push(b.value),c&&d.push(e[t+g])):(v.push(e[t+g]),s.push(b.value)))}return Promise.resolve(s.length>0&&u.mutate({trans:r,type:"add",values:s}).then((function(e){for(var n in e.failures)v.splice(parseInt(n),1);y(s.length,e)}))).then((function(e){return p.length>0&&u.mutate({trans:r,type:"put",keys:d,values:p}).then((function(e){return y(p.length,e)}))})).then((function(){return v.length>0&&u.mutate({trans:r,type:"delete",keys:v}).then((function(e){return y(v.length,e)}))})).then((function(){return e.length>t+o&&n(t+f)}))}))};return n(0).then((function(){if(p.length>0)throw new Mt("Error modifying one or more objects",p,d,v);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,n=e.range;return mi(e)&&(e.isPrimKey&&!ui||3===n.type)?this._write((function(t){var r=e.table.core.schema.primaryKey,i=n;return e.table.core.count({trans:t,query:{index:r,range:i}}).then((function(n){return e.table.core.mutate({trans:t,type:"deleteRange",range:i}).then((function(e){var t=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Mt("Could not delete some values",Object.keys(t).map((function(e){return t[e]})),n-r);return n-r}))}))})):this.modify((function(e,n){return n.value=null}))},e}();function Oi(e,n){return e<n?-1:e===n?0:1}function Ai(e,n){return e>n?-1:e===n?0:1}function Ei(e,n,t){var r=e instanceof Ki?new e.Collection(e):e;return r._ctx.error=t?new t(n):new TypeError(n),r}function ji(e){return new e.Collection(e,(function(){return Mi("")})).limit(0)}function Pi(e,n,t,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var c=n[s];if(c!==r[s])return i(e[s],t[s])<0?e.substr(0,s)+t[s]+t.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+t.substr(s+1):u>=0?e.substr(0,u)+n[u]+t.substr(u+1):null;i(e[s],c)<0&&(u=s)}return a<r.length&&"next"===o?e+t.substr(e.length):a<e.length&&"prev"===o?e.substr(0,t.length):u<0?null:e.substr(0,u)+r[u]+t.substr(u+1)}function Ti(e,n,t,r){var i,o,a,u,s,c,l,f=t.length;if(!t.every((function(e){return"string"==typeof e})))return Ei(e,ri);function h(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?Oi:Ai;var n=t.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,n){return a(e.lower,n.lower)}));u=n.map((function(e){return e.upper})),s=n.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var p=new e.Collection(e,(function(){return Ii(u[0],s[f-1]+r)}));p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm((function(e,t,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(n(h,s,d))return!0;for(var p=null,v=d;v<f;++v){var y=Pi(i,h,u[v],s[v],a,c);null===y&&null===p?d=v+1:(null===p||a(p,y)>0)&&(p=y)}return t(null!==p?function(){e.continue(p+l)}:r),!1})),p}function Ii(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function Mi(e){return{type:1,lower:e,upper:e}}var Ki=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,n,t,r){t=!1!==t,r=!0===r;try{return this._cmp(e,n)>0||0===this._cmp(e,n)&&(t||r)&&(!t||!r)?ji(this):new this.Collection(this,(function(){return Ii(e,n,!t,!r)}))}catch(e){return Ei(this,ti)}},e.prototype.equals=function(e){return null==e?Ei(this,ti):new this.Collection(this,(function(){return Mi(e)}))},e.prototype.above=function(e){return null==e?Ei(this,ti):new this.Collection(this,(function(){return Ii(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Ei(this,ti):new this.Collection(this,(function(){return Ii(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Ei(this,ti):new this.Collection(this,(function(){return Ii(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Ei(this,ti):new this.Collection(this,(function(){return Ii(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?Ei(this,ri):this.between(e,e+ei,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Ti(this,(function(e,n){return 0===e.indexOf(n[0])}),[e],ei)},e.prototype.equalsIgnoreCase=function(e){return Ti(this,(function(e,n){return e===n[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=wt.apply(bt,arguments);return 0===e.length?ji(this):Ti(this,(function(e,n){return-1!==n.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=wt.apply(bt,arguments);return 0===e.length?ji(this):Ti(this,(function(e,n){return n.some((function(n){return 0===e.indexOf(n)}))}),e,ei)},e.prototype.anyOf=function(){var e=this,n=wt.apply(bt,arguments),t=this._cmp;try{n.sort(t)}catch(e){return Ei(this,ti)}if(0===n.length)return ji(this);var r=new this.Collection(this,(function(){return Ii(n[0],n[n.length-1])}));r._ondirectionchange=function(r){t="next"===r?e._ascending:e._descending,n.sort(t)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;t(a,n[i])>0;)if(++i===n.length)return r(o),!1;return 0===t(a,n[i])||(r((function(){e.continue(n[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[ni,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=wt.apply(bt,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ei(this,ti)}var n=e.reduce((function(e,n){return e?e.concat([[e[e.length-1][1],n]]):[[ni,n]]}),null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,n){var t=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,u=this._max;if(0===e.length)return ji(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Ei(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Rt.InvalidArgument);var s=!n||!1!==n.includeLowers,c=n&&!0===n.includeUppers;var l,f=i;function h(e,n){return f(e[0],n[0])}try{(l=e.reduce((function(e,n){for(var t=0,i=e.length;t<i;++t){var o=e[t];if(r(n[0],o[1])<0&&r(n[1],o[0])>0){o[0]=a(o[0],n[0]),o[1]=u(o[1],n[1]);break}}return t===i&&e.push(n),e}),[])).sort(h)}catch(e){return Ei(this,ti)}var p=0,d=c?function(e){return i(e,l[p][1])>0}:function(e){return i(e,l[p][1])>=0},v=s?function(e){return o(e,l[p][0])>0}:function(e){return o(e,l[p][0])>=0};var y=d,g=new this.Collection(this,(function(){return Ii(l[0][0],l[l.length-1][1],!s,!c)}));return g._ondirectionchange=function(e){"next"===e?(y=d,f=i):(y=v,f=o),l.sort(h)},g._addAlgorithm((function(e,n,r){for(var o=e.key;y(o);)if(++p===l.length)return n(r),!1;return!!function(e){return!d(e)&&!v(e)}(o)||(0===t._cmp(o,l[p][1])||0===t._cmp(o,l[p][0])||n((function(){f===i?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),g},e.prototype.startsWithAnyOf=function(){var e=wt.apply(bt,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?ji(this):this.inAnyRange(e.map((function(e){return[e,e+ei]}))):Ei(this,"startsWithAnyOf() only works with strings")},e}();function Fi(e){return 1===e.length?e[0]:e}function Di(e){try{return e.only([[]]),[[]]}catch(e){return ei}}function Ri(e){return Tr((function(n){return Ni(n),e(n.target.error),!1}))}function Ni(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Li=function(){function e(){}return e.prototype._lock=function(){return et(!pr.global),++this._reculock,1!==this._reculock||pr.global||(pr.lockOwnerFor=this),this},e.prototype._unlock=function(){if(et(!pr.global),0==--this._reculock)for(pr.global||(pr.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{$r(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&pr.lockOwnerFor!==this},e.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(et(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new Rt.DatabaseClosed(r);case"MissingAPIError":throw new Rt.MissingAPI(r.message,r);default:throw new Rt.OpenFailed(r)}if(!this.active)throw new Rt.TransactionInactive;return et(null===this._completion._state),(e=this.idbtrans=e||t.transaction(Fi(this.storeNames),this.mode)).onerror=Tr((function(t){Ni(t),n._reject(e.error)})),e.onabort=Tr((function(t){Ni(t),n.active&&n._reject(new Rt.Abort(e.error)),n.active=!1,n.on("abort").fire(t)})),e.oncomplete=Tr((function(){n.active=!1,n._resolve()})),this},e.prototype._promise=function(e,n,t){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xr(new Rt.ReadOnly("Transaction is readonly"));if(!this.active)return Xr(new Rt.TransactionInactive);if(this._locked())return new gr((function(i,o){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,o)},pr])}));if(t)return Nr((function(){var e=new gr((function(e,t){r._lock();var i=n(e,t,r);i&&i.then&&i.then(e,t)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new gr((function(e,t){var i=n(e,t,r);i&&i.then&&i.then(e,t)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var n=this._root(),t=gr.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then((function(){return t}));else{n._waitingFor=t,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);!function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=n._waitingFor;return new gr((function(e,r){t.then((function(t){return n._waitingQueue.push(Tr(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Tr(r.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new Rt.Abort),this.active=!1},e.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(Un(n,e))return n[e];var t=this.schema[e];if(!t)throw new Rt.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,t,this);return r.core=this.db.core.table(e),n[e]=r,r},e}();function zi(e,n,t,r,i,o,a){return{name:e,keyPath:n,unique:t,multi:r,auto:i,compound:o,src:(t&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Bi(n)}}function Bi(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function qi(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:tt(t,(function(e){return[e.name,e]}))}}function Hi(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(n){return n[e]}:function(n){return rt(n,e)}}(e):function(n){return rt(n,e)}}function Ui(e,n){return"delete"===n.type?n.keys:n.keys||n.values.map(e.extractKey)}function Wi(e){return[].slice.call(e)}var $i=0;function Vi(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Gi(e,n,t,r){var i=n.cmp.bind(n);function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}var a=function(e,n){var t=Wi(e.objectStoreNames);return{schema:{name:e.name,tables:t.map((function(e){return n.objectStore(e)})).map((function(e){var n=e.keyPath,t=e.autoIncrement,r=Ln(n),i=null==n,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:n,autoIncrement:t,unique:!0,extractKey:Hi(n)},indexes:Wi(e.indexNames).map((function(n){return e.index(n)})).map((function(e){var n=e.name,t=e.unique,r=e.multiEntry,i=e.keyPath,a={name:n,compound:Ln(i),keyPath:i,unique:t,multiEntry:r,extractKey:Hi(i)};return o[Vi(i)]=a,a})),getIndexByKeyPath:function(e){return o[Vi(e)]}};return o[":id"]=a.primaryKey,null!=n&&(o[Vi(n)]=a.primaryKey),a}))},hasGetAll:t.length>0&&"getAll"in n.objectStore(t[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),u=a.schema,s=a.hasGetAll,c=u.tables.map((function(e){return function(e){var n=e.name;return{name:n,schema:e,mutate:function(t){var r=t.trans,i=t.type,a=t.keys,u=t.values,s=t.range,c=t.wantResults;return new Promise((function(t,l){t=Tr(t);var f=r.objectStore(n),h=null==f.keyPath,p="put"===i||"add"===i;if(!p&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d=(a||u||{length:1}).length;if(a&&u&&a.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var v,y=c&&Rn(a||Ui(e.primaryKey,{type:i,keys:a,values:u})),g=[],m=0,b=function(e){++m,Ni(e),y&&(y[e.target._reqno]=void 0),g[e.target._reqno]=e.target.error},w=function(e){var n=e.target;y[n._reqno]=n.result};if("deleteRange"===i){if(4===s.type)return t({numFailures:m,failures:g,results:y,lastResult:void 0});v=3===s.type?f.clear():f.delete(o(s))}else{var _=p?h?[u,a]:[u,null]:[a,null],x=_[0],k=_[1];if(p)for(var S=0;S<d;++S)(v=k&&void 0!==k[S]?f[i](x[S],k[S]):f[i](x[S]))._reqno=S,y&&void 0===y[S]&&(v.onsuccess=w),v.onerror=b;else for(S=0;S<d;++S)(v=f[i](x[S]))._reqno=S,v.onerror=b}var C=function(e){var n=e.target.result;y&&(y[d-1]=n),t({numFailures:m,failures:g,results:y,lastResult:n})};v.onerror=function(e){b(e),C(e)},v.onsuccess=C}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Tr(e);for(var o,a=t.objectStore(n),u=r.length,s=new Array(u),c=0,l=0,f=function(n){var t=n.target;s[t._pos]=t.result,++l===c&&e(s)},h=Ri(i),p=0;p<u;++p)null!=r[p]&&((o=a.get(r[p]))._pos=p,o.onsuccess=f,o.onerror=h,++c);0===c&&e(s)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Tr(e);var o=t.objectStore(n).get(r);o.onsuccess=function(n){return e(n.target.result)},o.onerror=Ri(i)}))},query:function(e){return function(t){return new Promise((function(r,i){r=Tr(r);var a=t.trans,u=t.values,s=t.limit,c=t.query,l=s===1/0?void 0:s,f=c.index,h=c.range,p=a.objectStore(n),d=f.isPrimaryKey?p:p.index(f.name),v=o(h);if(0===s)return r({result:[]});if(e){var y=u?d.getAll(v,l):d.getAllKeys(v,l);y.onsuccess=function(e){return r({result:e.target.result})},y.onerror=Ri(i)}else{var g=0,m=u||!("openKeyCursor"in d)?d.openCursor(v):d.openKeyCursor(v),b=[];m.onsuccess=function(e){var n=m.result;return n?(b.push(u?n.value:n.primaryKey),++g===s?r({result:b}):void n.continue()):r({result:b})},m.onerror=Ri(i)}}))}}(s),openCursor:function(e){var t=e.trans,r=e.values,i=e.query,a=e.reverse,u=e.unique;return new Promise((function(e,s){e=Tr(e);var c=i.index,l=i.range,f=t.objectStore(n),h=c.isPrimaryKey?f:f.index(c.name),p=a?u?"prevunique":"prev":u?"nextunique":"next",d=r||!("openKeyCursor"in h)?h.openCursor(o(l),p):h.openKeyCursor(o(l),p);d.onerror=Ri(s),d.onsuccess=Tr((function(n){var r=d.result;if(r){r.___id=++$i,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),u=function(){throw new Error("Cursor not stopped")};r.trans=t,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Tr(s),r.next=function(){var e=this,n=1;return this.start((function(){return n--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var n=new Promise((function(e,n){e=Tr(e),d.onerror=Ri(n),r.fail=n,r.stop=function(n){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(n)}})),t=function(){if(d.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=Tr((function(e){d.onsuccess=t,t()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,t(),n},e(r)}else e(null)}),s)}))},count:function(e){var t=e.query,r=e.trans,i=t.index,a=t.range;return new Promise((function(e,t){var u=r.objectStore(n),s=i.isPrimaryKey?u:u.index(i.name),c=o(a),l=c?s.count(c):s.count();l.onsuccess=Tr((function(n){return e(n.target.result)})),l.onerror=Ri(t)}))}}}(e)})),l={};return c.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '"+e+"' not found");return l[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:Di(t),schema:u}}function Yi(e,n,t,r){var i=t.IDBKeyRange;return{dbcore:function(e,n){return n.reduce((function(e,n){var t=n.create;return Dn(Dn({},e),t(e))}),e)}(Gi(n,t.indexedDB,i,r),e.dbcore)}}function Ji(e,n){var t=n.db,r=Yi(e._middlewares,t,e._deps,n);e.core=r.dbcore,e.tables.forEach((function(n){var t=n.name;e.core.schema.tables.some((function(e){return e.name===t}))&&(n.core=e.core.table(t),e[t]instanceof e.Table&&(e[t].core=n.core))}))}function Qi(e,n,t,r){t.forEach((function(t){var i=r[t];n.forEach((function(n){var r=Jn(n,t);(!r||"value"in r&&void 0===r.value)&&(n===e.Transaction.prototype||n instanceof e.Transaction?Vn(n,t,{get:function(){return this.table(t)},set:function(e){$n(this,t,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):n[t]=new e.Table(t,i))}))}))}function Xi(e,n){n.forEach((function(n){for(var t in n)n[t]instanceof e.Table&&delete n[t]}))}function Zi(e,n){return e._cfg.version-n._cfg.version}function eo(e,n,t,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(t),o._completion.catch(r);var a=o._reject.bind(o),u=pr.transless||pr;Nr((function(){pr.trans=o,pr.transless=u,0===n?(Nn(i).forEach((function(e){to(t,e,i[e].primKey,i[e].indexes)})),Ji(e,t),gr.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,n,t,r){var i=[],o=e._versions,a=e._dbSchema=io(e,e.idbdb,r),u=!1;function s(){return i.length?gr.resolve(i.shift()(t.idbtrans)).then(s):gr.resolve()}return o.filter((function(e){return e._cfg.version>=n})).forEach((function(o){i.push((function(){var i=a,s=o._cfg.dbschema;oo(e,i,r),oo(e,s,r),a=e._dbSchema=s;var c=no(i,s);c.add.forEach((function(e){to(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new Rt.Upgrade("Not yet support for changing primary key");var n=r.objectStore(e.name);e.add.forEach((function(e){return ro(n,e)})),e.change.forEach((function(e){n.deleteIndex(e.name),ro(n,e)})),e.del.forEach((function(e){return n.deleteIndex(e)}))}));var l=o._cfg.contentUpgrade;if(l&&o._cfg.version>n){Ji(e,r),t._memoizedTables={},u=!0;var f=at(s);c.del.forEach((function(e){f[e]=i[e]})),Xi(e,[e.Transaction.prototype]),Qi(e,[e.Transaction.prototype],Nn(f),f),t.schema=f;var h,p=_t(l);p&&Lr();var d=gr.follow((function(){if((h=l(t))&&p){var e=zr.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?gr.resolve(h):d.then((function(){return h}))}})),i.push((function(n){u&&ai||function(e,n){for(var t=0;t<n.db.objectStoreNames.length;++t){var r=n.db.objectStoreNames[t];null==e[r]&&n.db.deleteObjectStore(r)}}(o._cfg.dbschema,n);Xi(e,[e.Transaction.prototype]),Qi(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),t.schema=e._dbSchema}))})),s().then((function(){var e,n;n=r,Nn(e=a).forEach((function(t){n.db.objectStoreNames.contains(t)||to(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,t).catch(a)}))}function no(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var i=e[t],o=n[t];if(i){var a={name:t,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!oi)a.recreate=!0,r.change.push(a);else{var u=i.idxByName,s=o.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([t,o])}return r}function to(e,n,t,r){var i=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach((function(e){return ro(i,e)})),i}function ro(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function io(e,n,t){var r={};return Xn(n.objectStoreNames,0).forEach((function(e){for(var n=t.objectStore(e),i=n.keyPath,o=zi(Bi(i),i||"",!1,!1,!!n.autoIncrement,i&&"string"!=typeof i,!0),a=[],u=0;u<n.indexNames.length;++u){var s=n.index(n.indexNames[u]);i=s.keyPath;var c=zi(s.name,i,!!s.unique,!!s.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(c)}r[e]=qi(e,o,a)})),r}function oo(e,n,t){for(var r=t.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],a=t.objectStore(o);e._hasGetAll="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var s=a.indexNames[u],c=a.index(s).keyPath,l="string"==typeof c?c:"["+Xn(c).join("+")+"]";if(n[o]){var f=n[o].idxByName[l];f&&(f.name=s,delete n[o].idxByName[l],n[o].idxByName[s]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&zn.WorkerGlobalScope&&zn instanceof zn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var ao,uo=function(){function e(){}return e.prototype._parseStoresSpec=function(e,n){Nn(e).forEach((function(t){if(null!==e[t]){var r=e[t].split(",").map((function(e,n){var t=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;return zi(t,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Ln(r),0===n)})),i=r.shift();if(i.multi)throw new Rt.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new Rt.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Rt.Schema("Index must have a name and cannot be an empty string")})),n[t]=qi(t,i,r)}}))},e.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Bn(this._cfg.storesSource,e):e;var t=n._versions,r={},i={};return t.forEach((function(e){Bn(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),n._dbSchema=i,Xi(n,[n._allTables,n,n.Transaction.prototype]),Qi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Nn(i),i),n._storeNames=Nn(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function so(e){return Nr((function(){return pr.letThrough=!0,e()}))}function co(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?Xr(n.dbOpenError):e}));xt&&(n.openCanceller._stackHolder=Ot()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.dbReadyResolve,i=null;return gr.race([n.openCanceller,new gr((function(r,o){if(!t)throw new Rt.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=e.name,u=n.autoSchema?t.open(a):t.open(a,Math.round(10*e.verno));if(!u)throw new Rt.MissingAPI("IndexedDB API not available");u.onerror=Ri(o),u.onblocked=Tr(e._fireOnBlocked),u.onupgradeneeded=Tr((function(r){if(i=u.transaction,n.autoSchema&&!e._options.allowEmptyDB){u.onerror=Ni,i.abort(),u.result.close();var s=t.deleteDatabase(a);s.onsuccess=s.onerror=Tr((function(){o(new Rt.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{i.onerror=Ri(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=u.result,eo(e,c/10,i,o)}}),o),u.onsuccess=Tr((function(){i=null;var t=e.idbdb=u.result,o=Xn(t.objectStoreNames);if(o.length>0)try{var s=t.transaction(Fi(o),"readonly");n.autoSchema?function(e,n,t){e.verno=n.version/10;var r=e._dbSchema=io(0,n,t);e._storeNames=Xn(n.objectStoreNames,0),Qi(e,[e._allTables],Nn(r),r)}(e,t,s):(oo(e,e._dbSchema,s),function(e,n){var t=no(io(0,e.idbdb,n),e._dbSchema);return!(t.add.length||t.change.some((function(e){return e.add.length||e.change.length})))}(e,s)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ji(e,s)}catch(e){}ii.push(e),t.onversionchange=Tr((function(t){n.vcFired=!0,e.on("versionchange").fire(t)})),ao.add(a),r()}),o)}))]).then((function(){return n.onReadyBeingFired=[],gr.resolve(so(e.on.ready.fire)).then((function e(){if(n.onReadyBeingFired.length>0){var t=n.onReadyBeingFired.reduce(Gt,zt);return n.onReadyBeingFired=[],gr.resolve(so(t)).then(e)}}))})).finally((function(){n.onReadyBeingFired=null})).then((function(){return n.isBeingOpened=!1,e})).catch((function(t){try{i&&i.abort()}catch(e){}return n.isBeingOpened=!1,e.close(),n.dbOpenError=t,Xr(n.dbOpenError)})).finally((function(){n.openComplete=!0,r()}))}function lo(e){var n=function(n){return e.next(n)},t=i(n),r=i((function(n){return e.throw(n)}));function i(e){return function(n){var i=e(n),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(t,r):Ln(o)?Promise.all(o).then(t,r):t(o)}}return i(n)()}function fo(e,n,t){var r=arguments.length;if(r<2)throw new Rt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];t=i.pop();var o=st(i);return[e,o,t]}function ho(e,n,t,r,i){return gr.resolve().then((function(){var o=pr.transless||pr,a=e._createTransaction(n,t,e._dbSchema,r),u={trans:a,transless:o};r?a.idbtrans=r.idbtrans:a.create();var s,c=_t(i);c&&Lr();var l=gr.follow((function(){if(s=i.call(a,a))if(c){var e=zr.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=lo(s))}),u);return(s&&"function"==typeof s.then?gr.resolve(s).then((function(e){return a.active?e:Xr(new Rt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Xr(e)}))}))}function po(e,n,t){for(var r=Ln(e)?e.slice():[e],i=0;i<t;++i)r.push(n);return r}var vo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return Dn(Dn({},e),{table:function(n){var t=e.table(n),r=t.schema,i={},o=[];function a(e,n,t){var r=Vi(e),u=i[r]=i[r]||[],s=null==e?0:"string"==typeof e?1:e.length,c=n>0,l=Dn(Dn({},t),{isVirtual:c,isPrimaryKey:!c&&t.isPrimaryKey,keyTail:n,keyLength:s,extractKey:Hi(e),unique:!c&&t.unique});(u.push(l),l.isPrimaryKey||o.push(l),s>1)&&a(2===s?e[0]:e.slice(0,s-1),n+1,t);return u.sort((function(e,n){return e.keyTail-n.keyTail})),l}var u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];a(l.keyPath,0,l)}function f(n){var t,r,i=n.query.index;return i.isVirtual?Dn(Dn({},n),{query:{index:i,range:(t=n.query.range,r=i.keyTail,{type:1===t.type?2:t.type,lower:po(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:po(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):n}return Dn(Dn({},t),{schema:Dn(Dn({},r),{primaryKey:u,indexes:o,getIndexByKeyPath:function(e){var n=i[Vi(e)];return n&&n[0]}}),count:function(e){return t.count(f(e))},query:function(e){return t.query(f(e))},openCursor:function(n){var r=n.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return t.openCursor(n);return t.openCursor(f(n)).then((function(t){return t&&function(t){return Object.create(t,{continue:{value:function(r){null!=r?t.continue(po(r,n.reverse?e.MAX_KEY:e.MIN_KEY,i)):n.unique?t.continue(po(t.key,n.reverse?e.MIN_KEY:e.MAX_KEY,i)):t.continue()}},continuePrimaryKey:{value:function(n,r){t.continuePrimaryKey(po(n,e.MAX_KEY,i),r)}},key:{get:function(){var e=t.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return t.value}}})}(t)}))}})}})}},yo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return Dn(Dn({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey;return Dn(Dn({},t),{mutate:function(e){var i=pr.trans,o=i.table(n).hook,a=o.deleting,u=o.creating,s=o.updating;switch(e.type){case"add":if(u.fire===zt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(u.fire===zt&&s.fire===zt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(a.fire===zt)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(a.fire===zt)break;return i._promise("readwrite",(function(){return function(e){return function e(n,i,o){return t.query({trans:n,values:!1,query:{index:r,range:i},limit:o}).then((function(t){var r=t.result;return c({type:"delete",keys:r,trans:n}).then((function(t){return t.numFailures>0?Promise.reject(t.failures[0]):r.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(n,Dn(Dn({},i),{lower:r[r.length-1],lowerOpen:!0}),o)}))}))}(e.trans,e.range,1e4)}(e)}),!0)}return t.mutate(e);function c(e){var n=pr.trans,i=e.keys||Ui(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?Dn(Dn({},e),{keys:i,wantResults:!0}):Dn({},e)).type&&(e.values=Rn(e.values)),e.keys&&(e.keys=Rn(e.keys)),function(e,n,t){return"add"===n.type?Promise.resolve(new Array(n.values.length)):e.getMany({trans:n.trans,keys:t})}(t,e,i).then((function(o){var c=i.map((function(t,i){var c=o[i],l={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(l,t,c,n);else if("add"===e.type||void 0===c){var f=u.fire.call(l,t,e.values[i],n);null==t&&null!=f&&(t=f,e.keys[i]=t,r.outbound||it(e.values[i],r.keyPath,t))}else{var h=yt(c,e.values[i]),p=s.fire.call(l,h,t,c,n);if(p){var d=e.values[i];Object.keys(p).forEach((function(e){Un(d,e)?d[e]=p[e]:it(d,e,p[e])}))}}return l}));return t.mutate(e).then((function(n){for(var t=n.failures,r=n.results,a=n.numFailures,u=n.lastResult,s=0;s<i.length;++s){var l=r?r[s]:i[s],f=c[s];null==l?f.onerror&&f.onerror(t[s]):f.onsuccess&&f.onsuccess("put"===e.type&&o[s]?e.values[s]:l)}return{failures:t,results:r,numFailures:a,lastResult:u}})).catch((function(e){return c.forEach((function(n){return n.onerror&&n.onerror(e)})),Promise.reject(e)}))}))}}})}})}},go=function(){function e(n,t){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=t=Dn({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var o=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var a,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:zt,dbReadyPromise:null,cancelOpen:zt,openCanceller:null,autoSchema:!0};u.dbReadyPromise=new gr((function(e){u.dbReadyResolve=e})),u.openCanceller=new gr((function(e,n){u.cancelOpen=n})),this._state=u,this.name=n,this.on=yi(this,"populate","blocked","versionchange",{ready:[Gt,zt]}),this.on.ready.subscribe=Zn(this.on.ready.subscribe,(function(n){return function(t,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||gr.resolve().then(t),i&&n(t);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(t),i&&n(t);else{n(t);var o=r;i||n((function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,gi(Ci.prototype,(function(e,n){this.db=a;var t=pi,r=null;if(n)try{t=n()}catch(e){r=e}var i=e._ctx,o=i.table,u=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:u!==Bt?u:null}}))),this.Table=function(e){return gi(vi.prototype,(function(n,t,r){this.db=e,this._tx=r,this.name=n,this.schema=t,this.hook=e._allTables[n]?e._allTables[n].hook:yi(null,{creating:[Ut,zt],reading:[qt,Bt],updating:[$t,zt],deleting:[Wt,zt]})}))}(this),this.Transaction=function(e){return gi(Li.prototype,(function(n,t,r,i){var o=this;this.db=e,this.mode=n,this.storeNames=t,this.schema=r,this.idbtrans=null,this.on=yi(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new gr((function(e,n){o._resolve=e,o._reject=n})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var n=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):n&&o.idbtrans&&o.idbtrans.abort(),Xr(e)}))}))}(this),this.Version=function(e){return gi(uo.prototype,(function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return gi(Ki.prototype,(function(n,t,r){this.db=e,this._ctx={table:n,index:":id"===t?null:t,or:r};var i=e._deps.indexedDB;if(!i)throw new Rt.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,n){return i.cmp(n,e)},this._max=function(e,n){return i.cmp(e,n)>0?e:n},this._min=function(e,n){return i.cmp(e,n)<0?e:n},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Di(t.IDBKeyRange),this._createTransaction=function(e,n,t,i){return new r.Transaction(e,n,t,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),ii.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(n){return n.on("versionchange").fire(e)}))},this.use(vo),this.use(yo),o.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Rt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Rt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter((function(n){return n._cfg.version===e}))[0];return t||(t=new this.Version(e),n.push(t),n.sort(Zi),t.stores({}),this._state.autoSchema=!1,t)},e.prototype._whenReady=function(e){var n=this;return this._state.openComplete||pr.letThrough?e():new gr((function(e,t){if(!n._state.isBeingOpened){if(!n._options.autoOpen)return void t(new Rt.DatabaseClosed);n.open().catch(zt)}n._state.dbReadyPromise.then(e,t)})).then(e)},e.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,i=e.name;i&&this.unuse({stack:n,name:i});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:t,level:null==r?10:r,name:i}),o.sort((function(e,n){return e.level-n.level})),this},e.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter((function(e){return r?e.create!==r:!!t&&e.name!==t}))),this},e.prototype.open=function(){return co(this)},e.prototype.close=function(){var e=ii.indexOf(this),n=this._state;if(e>=0&&ii.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,n.dbOpenError=new Rt.DatabaseClosed,n.isBeingOpened&&n.cancelOpen(n.dbOpenError),n.dbReadyPromise=new gr((function(e){n.dbReadyResolve=e})),n.openCanceller=new gr((function(e,t){n.cancelOpen=t}))},e.prototype.delete=function(){var e=this,n=arguments.length>0,t=this._state;return new gr((function(r,i){var o=function(){e.close();var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Tr((function(){ao.remove(e.name),r()})),n.onerror=Ri(i),n.onblocked=e._fireOnBlocked};if(n)throw new Rt.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return Nn(this._allTables).map((function(n){return e._allTables[n]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=fo.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,n,t){var r=this,i=pr.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=n.map((function(e){var n=e instanceof r.Table?e.name:e;if("string"!=typeof n)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n})),"r"==e||e===li)o=li;else{if("rw"!=e&&e!=fi)throw new Rt.InvalidArgument("Invalid transaction mode: "+e);o=fi}if(i){if(i.mode===li&&o===fi){if(!u)throw new Rt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!u)throw new Rt.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),u&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(n,t){t(e)})):Xr(e)}var s=ho.bind(null,this,o,a,i,t);return i?i._promise(o,s,"lock"):pr.trans?$r(pr.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!Un(this._allTables,e))throw new Rt.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),mo=go;Wn(mo,Dn(Dn({},Lt),{delete:function(e){return new mo(e).delete()},exists:function(e){return new mo(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return ao?ao.getDatabaseNames().then(e):gr.resolve([])},defineClass:function(){return function(e){Bn(this,e)}},ignoreTransaction:function(e){return pr.trans?$r(pr.transless,e):e()},vip:so,async:function(e){return function(){try{var n=lo(e.apply(this,arguments));return n&&"function"==typeof n.then?n:gr.resolve(n)}catch(e){return Xr(e)}}},spawn:function(e,n,t){try{var r=lo(e.apply(t,n||[]));return r&&"function"==typeof r.then?r:gr.resolve(r)}catch(e){return Xr(e)}},currentTransaction:{get:function(){return pr.trans||null}},waitFor:function(e,n){var t=gr.resolve("function"==typeof e?mo.ignoreTransaction(e):e).timeout(n||6e4);return pr.trans?pr.trans.waitFor(t):t},Promise:gr,debug:{get:function(){return xt},set:function(e){kt(e,"dexie"===e?function(){return!0}:si)}},derive:Gn,extend:Bn,props:Wn,override:Zn,Events:yi,getByKeyPath:rt,setByKeyPath:it,delByKeyPath:ot,shallowClone:at,deepClone:ht,getObjectDiff:yt,asap:nt,minKey:ni,addons:[],connections:ii,errnames:Ft,dependencies:function(){try{return{indexedDB:zn.indexedDB||zn.mozIndexedDB||zn.webkitIndexedDB||zn.msIndexedDB,IDBKeyRange:zn.IDBKeyRange||zn.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Zr,version:Zr.split(".").map((function(e){return parseInt(e)})).reduce((function(e,n,t){return e+n/Math.pow(10,2*t)})),default:mo,Dexie:mo})),mo.maxKey=Di(mo.dependencies.IDBKeyRange),function(e){try{ao=function(e){var n,t=e&&"function"==typeof e.databases;if(!t){var r=new go(ci,{addons:[]});r.version(1).stores({dbnames:"name"}),n=r.table("dbnames")}return{getDatabaseNames:function(){return t?gr.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==ci}))})):n.toCollection().primaryKeys()},add:function(e){return!t&&e!==ci&&n.put({name:e}).catch(zt)},remove:function(e){return!t&&e!==ci&&n.delete(e).catch(zt)}}}(e)}catch(e){}}(go.dependencies.indexedDB),gr.rejectionMapper=function(e,n){if(!e||e instanceof Tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Nt[e.name])return e;var t=new Nt[e.name](n||e.message,e);return"stack"in e&&Vn(t,"stack",{get:function(){return this.inner.stack}}),t},kt(xt,si);const bo=["name","translate","completeReverseTranslation"],wo=["listen","listenTap"],_o=["name"],xo=["listenTap"],ko=()=>{},So=e=>e,Co=e=>{e.then(ko).catch(ko)},Oo=e=>"number"==typeof e&&Number.isFinite(e),Ao=e=>"string"==typeof e,Eo=Array.isArray,jo=e=>"object"==typeof e&&!!e&&!Eo(e),Po=(e,n)=>e>n,To=(e,n)=>e<n;function Io(e,n,t){let r,i;if(Eo(e))for(let o=0,a=e.length;o<a;o++){const a=n(e[o]);(void 0===i||t(a,i))&&(r=e[o],i=a)}return r}const Mo=(e,n)=>{const t=Io(e,n,Po);return void 0===t?t:n(t)},Ko=e=>Mo(e,So),Fo=(e,n)=>e.reduce((e,t)=>e+n(t),0);function Do(e,n){const t={};for(let r=0,i=e.length;r<i;r++){const i=e[r],o=String(n(i));o in t||(t[o]=[]),t[o].push(e[r])}return t}function Ro(e,n,t=So){if(e.length<=1)return e.slice();const r=[];let i=0,o=t(e[0]);for(let a=1,u=e.length;a<u;a++){const u=t(e[a]),s=o!==u?0:n(e[i],e[a],o);-1!==s&&(0===s&&r.push(e[i]),o=u,i=a)}return r.push(e[i]),r}const No=e=>0===e.length?[]:e.reduce((e,n)=>e.flatMap(e=>n.map(n=>[...e,n])),[[]]);function Lo(e,n=!0,t=!1){let r=t?e.normalize("NFD").replace(/\p{M}/gu,""):e;return r=r.normalize("NFC"),n?r.trim().replace(/(\s)\1+/g,"$1"):r}function zo(e){const n=e.match(/([\p{L}\p{N}]+)/gu);return n?Array.from(n):[]}function Bo(e,...n){const t=new Map,[r,...i]=n;for(const[e,n]of r)t.set(e,n);for(const n of i)for(const[r,i]of n){const n=t.get(r);t.set(r,void 0===n?i:e(n,i))}return t}var qo=n(t((function(e,n){!function(e){var n=Object.prototype.hasOwnProperty,t=function(e){for(var t,r=0;r<(arguments.length<=1?0:arguments.length-1);r++)if((t=r+1<1||arguments.length<=r+1?void 0:arguments[r+1])&&"object"==typeof t)for(var i in t)n.call(t,i)&&(e[i]=t[i]);return e},r=function(e){var n=e.length;if(!n)return[];if(1===n)return[e[0]];if(2===n)return[e[0],e[1]];if(3===n)return[e[0],e[1],e[2]];for(var t=new Array(n),r=0;r<n;r++)t[r]=e[r];return t},i=function(e,n){var t="function"==typeof n?n:function(e){return function(n,t){if(n.length!==t.length)return!1;for(var r=0,i=n.length;r<i;r++)if(!e(n[r],t[r]))return!1;return!0}}(e);return function(e,n){for(var r=0;r<e.length;r++)if(t(e[r],n))return r;return-1}},o=function(e,n){return e===n||e!=e&&n!=n},a=function(e,n,t){},u=function(e,n,t){for(var r=t;r--;)e[r+1]=e[r];e[0]=n},s=function(e){var n=i(e.isEqual,e.isMatchingKey);return function(t,r){var i=t.keys[0];t.values[0]=t.values[0].then((function(n){return e.onCacheHit(t,e,r),e.onCacheChange(t,e,r),n})).catch((function(e){var r=n(t.keys,i);throw~r&&(t.keys.splice(r,1),t.values.splice(r,1)),e}))}};function c(e,n){if(e.isMemoized)return e;var c=n||{},l=c.isEqual,f=void 0===l?o:l,h=c.isMatchingKey,p=c.isPromise,d=void 0!==p&&p,v=c.maxSize,y=void 0===v?1:v,g=c.onCacheAdd,m=void 0===g?a:g,b=c.onCacheChange,w=void 0===b?a:b,_=c.onCacheHit,x=void 0===_?a:_,k=c.transformKey,S=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],0<=n.indexOf(t)||(i[t]=e[t]);return i}(c,["isEqual","isMatchingKey","isPromise","maxSize","onCacheAdd","onCacheChange","onCacheHit","transformKey"]),C=t({},S,{isEqual:f,isMatchingKey:h,isPromise:d,maxSize:y,onCacheAdd:m,onCacheChange:w,onCacheHit:x,transformKey:k}),O=i(f,h),A=s(C),E=!(!k&&!h),j={keys:[],get size(){return j.keys.length},values:[]},P=j.keys,T=j.values;function I(){var n=arguments,t=E?r(n):n,i=k?k(t):t,o=O(P,i);if(~o)x(j,C,I),o&&(u(P,P[o],o),u(T,T[o],o),w(j,C,I));else{P.length>=y&&(P.pop(),T.pop());var a=E?i:r(t),s=e.apply(this,n);u(P,a,P.length),u(T,s,T.length),d&&A(j,I),m(j,C,I),w(j,C,I)}return T[0]}return Object.defineProperties(I,{cache:{configurable:!0,get:function(){return j}},cacheSnapshot:{configurable:!0,get:function(){return{keys:r(j.keys),size:j.size,values:r(j.values)}}},isMemoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return C}}}),I}function l(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(n.length)return n.reduce((function(e,n){return"function"==typeof e?"function"==typeof n?function(){return e(n.apply(this,arguments))}:e:"function"==typeof n?n:void 0}))}function f(e,n){for(var t=0;t<e.length;t++)if(e[t].key===n)return t;return-1}function h(e,n){var t="function"==typeof n?n:function(n,t){for(var r=0;r<t.length;r++)if(!e(n[r],t[r]))return!1;return!0};return function(e,n){for(var r=0;r<e.length;r++)if(e[r].length===n.length&&t(e[r],n))return r;return-1}}function p(e){return Array.isArray(e)?e:[e]}function d(e,n,t){var r=f(e,n);~r&&(clearTimeout(e[r].timeoutId),t&&e.splice(r,1))}function v(e,n){var t=setTimeout(e,n);return"function"==typeof t.unref&&t.unref(),t}function y(){D.isCollectingStats=!0}function g(e,n){return e?(n/e*100).toFixed(4)+"%":"0%"}function m(e){if(D.isCollectingStats||R||(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),R=!0),e){if(!D.profiles[e])return{calls:0,hits:0,usage:"0%"};var n=D.profiles[e];return Object.assign({},n,{usage:g(n.calls,n.hits)})}var t=Object.keys(D.profiles).reduce((function(e,n){return e.calls+=D.profiles[n].calls,e.hits+=D.profiles[n].hits,e}),{calls:0,hits:0});return Object.assign({},t,{profiles:Object.keys(D.profiles).reduce((function(e,n){return e[n]=m(n),e}),{}),usage:g(t.calls,t.hits)})}function b(e,n){return e&&"object"==typeof e&&n.add(e)}function w(e,n,t,r){for(var i,o=0;o<e.length;o++)if(t((i=e[o])[0],n[0],r)&&t(i[1],n[1],r))return!0;return!1}function _(e,n,t,r){for(var i=0;i<e.length;i++)if(t(e[i],n,r))return!0;return!1}function x(e,n){return e===n||e!=e&&n!=n}function k(e){return e.constructor===Object}function S(e){return"function"==typeof e.then}function C(e){return!(!e.$$typeof||!e._store)}function O(e){return function(n){var t=e||n;return function(e,n,r){void 0===r&&(r=H?new WeakSet:Object.create({_values:[],add:function(e){this._values.push(e)},has:function(e){return!!~this._values.indexOf(e)}}));var i=r.has(e),o=r.has(n);return i||o?i&&o:(b(e,r),b(n,r),t(e,n,r))}}}function A(e){var n=[];return e.forEach((function(e,t){return n.push([t,e])})),n}function E(e){var n=[];return e.forEach((function(e){return n.push(e)})),n}function j(e,n,t,r){var i,o=U(e),a=U(n);if(o.length!==a.length)return!1;for(var u=0;u<o.length;u++){if(!_(a,i=o[u],x))return!1;if(!("_owner"===i&&C(e)&&C(n)||t(e[i],n[i],r)))return!1}return!0}function P(e){var n="function"==typeof e?e(t):t;function t(e,t,r){if(x(e,t))return!0;var i=typeof e;if(i!=typeof t||"object"!=i||!e||!t)return!1;if(k(e)&&k(t))return j(e,t,n,r);var o=W(e),a=W(t);if(o||a)return o===a&&function(e,n,t,r){if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i],r))return!1;return!0}(e,t,n,r);var u=e instanceof Date,s=t instanceof Date;if(u||s)return u==s&&x(e.getTime(),t.getTime());var c=e instanceof RegExp,l=t instanceof RegExp;if(c||l)return c==l&&function(e,n){return e.source===n.source&&e.global===n.global&&e.ignoreCase===n.ignoreCase&&e.multiline===n.multiline&&e.unicode===n.unicode&&e.sticky===n.sticky&&e.lastIndex===n.lastIndex}(e,t);if(S(e)||S(t))return e===t;if(B){var f=e instanceof Map,h=t instanceof Map;if(f||h)return f==h&&function(e,n,t,r){if(e.size!==n.size)return!1;for(var i=A(e),o=A(n),a=0;a<i.length;a++)if(!w(o,i[a],t,r)||!w(i,o[a],t,r))return!1;return!0}(e,t,n,r)}if(q){var p=e instanceof Set,d=t instanceof Set;if(p||d)return p==d&&function(e,n,t,r){if(e.size!==n.size)return!1;for(var i=E(e),o=E(n),a=0;a<i.length;a++)if(!_(o,i[a],t,r)||!_(i,o[a],t,r))return!1;return!0}(e,t,n,r)}return j(e,t,n,r)}return t}function T(e){return function(n){if(e>=n.length)return n;switch(e){case 0:return[];case 1:return[n[0]];case 2:return[n[0],n[1]];case 3:return[n[0],n[1],n[2]];case 4:return[n[0],n[1],n[2],n[3]];case 5:return[n[0],n[1],n[2],n[3],n[4]]}return Array.prototype.slice.call(n,0,e)}}var I={equals:void 0,isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1/0,onExpire:void 0,profileName:void 0,serializer:void 0,shouldSerializeFunctions:!1,transformArgs:void 0,updateExpire:!1},M=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(n.length)return n.reduce((function(e,n){return"function"==typeof e?"function"==typeof n?function(){n.apply(this,arguments),e.apply(this,arguments)}:e:"function"==typeof n?n:void 0}))},K=function(e,n){return n===I?e:Object.assign({},e,n,{onCacheAdd:M(e.onCacheAdd,n.onCacheAdd),onCacheChange:M(e.onCacheChange,n.onCacheChange),onCacheHit:M(e.onCacheHit,n.onCacheHit),transformArgs:l(e.transformArgs,n.transformArgs)})},F=function(e,n,t,r){var i=n.maxAge,o=n.updateExpire,a="number"==typeof i&&isFinite(i)?function e(n,t,r,i){var o=t.maxAge,a=t.onCacheChange,u=t.onExpire,s=h(r,i);return function(i,c,l){var h=i.keys[0];if(!~f(n,h)){var p=function(){var o=s(i.keys,h),f=i.values[o];~o&&(i.keys.splice(o,1),i.values.splice(o,1),"function"==typeof a&&a(i,c,l)),d(n,h,!0),"function"==typeof u&&!1===u(h)&&(i.keys.unshift(h),i.values.unshift(f),e(n,t,r)(i,c,l),"function"==typeof a&&a(i,c,l))};n.push({expirationMethod:p,key:h,timeoutId:v(p,o)})}}}(e,n,t,r):void 0;return{onCacheAdd:a,onCacheHit:a&&o?function(e,n){var t=n.maxAge;return function(n){var r=n.keys[0],i=f(e,r);~i&&(d(e,r,!1),e[i].timeoutId=v(e[i].expirationMethod,t))}}(e,n):void 0}},D={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},R=!1,N=function(e){var n=(new Error).stack,t=e.displayName||e.name||"Anonymous "+D.anonymousProfileNameCounter++;if(!n)return t;for(var r,i,o=n.split("\n").slice(3),a=0;a<o.length;a++)if(!~(r=o[a]).indexOf("/moize/")&&!~r.indexOf(" (native)")&&!~r.indexOf(" Function.")){i=r.replace(/\n/g,"\\n").trim();break}return i?t+" "+i:t},L=function(e){return D.isCollectingStats?{onCacheAdd:function(e){var n=e.profileName;return D.profiles[n]||(D.profiles[n]={calls:0,hits:0}),function(){D.profiles[n].calls++}}(e),onCacheHit:function(e){var n=e.profileName;return function(){D.profiles[n].calls++,D.profiles[n].hits++}}(e)}:{}},z=function(e,n){return function(e,n){var t=n.expirations,r=e.options,i=r.isEqual,o=r.isMatchingKey,a=r.onCacheAdd,s=r.onCacheChange,c=r.transformKey,l=h(i,o);e.add=function(n,t){var r=c?c(n):n;~l(e.cache.keys,r)||(e.cache.size>=e.options.maxSize&&(e.cache.keys.pop(),e.cache.values.pop()),e.cache.keys.unshift(r),e.cache.values.unshift(t),a(e.cache,e.options,e),s(e.cache,e.options,e))},e.clear=function(){e.cache.keys.length=0,e.cache.values.length=0,s(e.cache,e.options,e)},e.get=function(n){var t=l(e.cache.keys,c?c(n):n);return~t?e.apply(this,e.cache.keys[t]):void 0},e.getStats=function(){return m(e.options.profileName)},e.has=function(n){return!!~l(e.cache.keys,c?c(n):n)},e.keys=function(){return e.cacheSnapshot.keys},e.remove=function(n){var r=l(e.cache.keys,c?c(n):n);if(~r){var i=e.cache.keys[r];e.cache.keys.splice(r,1),e.cache.values.splice(r,1),s(e.cache,e.options,e),d(t,i,!0)}},e.update=function(n,t){var r=l(e.cache.keys,c?c(n):n);if(~r){var i=e.cache.keys[r];u(e.cache.keys,i,r),u(e.cache.values,t,r),s(e.cache,e.options,e)}},e.values=function(){return e.cacheSnapshot.values}}(e,n),function(e,n){var t=n.expirations,r=n.options,i=n.originalFunction,o=e.options;Object.defineProperties(e,{_microMemoizeOptions:{configurable:!0,get:function(){return o}},expirations:{configurable:!0,get:function(){return t}},expirationsSnapshot:{configurable:!0,get:function(){return t.slice(0)}},isCollectingStats:{configurable:!0,get:function(){return D.isCollectingStats}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return r}},originalFunction:{configurable:!0,get:function(){return i}}}),r.isReact&&(e.contextTypes=i.contextTypes,e.defaultProps=i.defaultProps,e.displayName="Moized("+(i.displayName||i.name||"Component")+")",e.propTypes=i.propTypes)}(e,n),e},B="function"==typeof Map,q="function"==typeof Set,H="function"==typeof WeakSet,U=Object.keys,W=Array.isArray,$=(P(O()),P(O(x)),P()),V=P((function(){return x}));function G(e,n,t){return"[ref-"+t+"]"}var Y=function(e,n){if(e[0]===n)return 0;for(var t=e.length,r=1;r<t;r++)if(e[r]===n)return r;return-1};function J(e,n){var t=n||G,r="function"==typeof e,i=[];return function(n,o){if("object"==typeof o)if(i.length){var a=Y(i,this)+1;a?i=function(e,n){for(var t=new Array(n),r=0;r<n;r++)t[r]=e[r];return t}(i,a):i[i.length]=this;var u=Y(i,o);if(~u)return t.call(this,n,o,u)}else i[0]=o;return r?e.call(this,n,o):o}}function Q(e,n){return"function"==typeof n?""+n:n}function X(e,n){try{return JSON.stringify(e,n)}catch(t){return function(e,n,t,r){return JSON.stringify(e,J(n,r),t)}(e,n)}}function Z(e){return"function"==typeof e.serializer?l(p,e.serializer):function(e){var n=e.shouldSerializeFunctions?Q:null;return function(e){for(var t,r,i="|",o=0;o<e.length;o++)i+=(r=typeof(t=e[o]),(!t||"object"!=r&&"function"!=r?t:X(t,n))+"|");return[i]}}(e)}function ee(e,n){return e[0]===n[0]}var ne=function(e){if("function"==typeof e)return function(n,t,r){return e(r.cache,r.options,r)}},te=function(e){var n=e.equals,t=e.isDeepEqual,r=e.isReact;return n||t&&$||r&&V||x},re=function(e){var n=e.isSerialized;return e.matchesKey||n&&ee||void 0},ie=function(e){var n=e.maxArgs,t=e.isReact,r=e.isSerialized,i=e.transformArgs;return l(r&&Z(e),"function"==typeof i&&l(p,i),t&&T(2),"number"==typeof n&&T(n))};function oe(e,n){if(void 0===n&&(n=I),e.isMoized)return oe(e.originalFunction,K(e.options,n));if("object"==typeof e)return function(n,t){return void 0===t&&(t={}),"function"==typeof n?oe(n,K(e,t)):oe(K(e,n))};var t=Object.assign({},I,n,{maxArgs:"number"==typeof n.maxArgs&&0<=n.maxArgs?n.maxArgs:I.maxArgs,maxSize:"number"==typeof n.maxSize&&0<=n.maxSize?n.maxSize:I.maxSize,profileName:n.profileName||N(e)}),r=[],i=(t.equals,t.isDeepEqual,t.isPromise),o=(t.isReact,t.isSerialized,t.matchesKey,t.maxAge,t.maxArgs,t.maxSize),a=t.onCacheAdd,u=t.onCacheChange,s=t.onCacheHit,l=(t.onExpire,t.profileName,t.shouldSerializeFunctions,t.serializer,t.transformArgs,t.updateExpire,function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],0<=n.indexOf(t)||(i[t]=e[t]);return i}(t,["equals","isDeepEqual","isPromise","isReact","isSerialized","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","shouldSerializeFunctions","serializer","transformArgs","updateExpire"])),f=te(t),h=re(t),p=F(r,t,f,h),d=L(t),v=ie(t),y=Object.assign({},l,{isEqual:f,isMatchingKey:h,isPromise:i,maxSize:o,onCacheAdd:ne(M(a,p.onCacheAdd,d.onCacheAdd)),onCacheChange:ne(u),onCacheHit:ne(M(s,p.onCacheHit,d.onCacheHit)),transformKey:v});return z(c(e,y),{expirations:r,options:t,originalFunction:e})}oe.collectStats=y,oe.compose=function(){return l.apply(null,arguments)||oe},oe.deep=oe({isDeepEqual:!0}),oe.getStats=m,oe.isCollectingStats=function(){return D.isCollectingStats},oe.isMoized=function(e){return"function"==typeof e&&!!e.isMoized},oe.maxAge=function(e){return oe({maxAge:e})},oe.maxArgs=function(e){return oe({maxArgs:e})},oe.maxSize=function(e){return oe({maxSize:e})},oe.promise=oe({isPromise:!0,updateExpire:!0}),oe.react=oe({isReact:!0}),oe.reactSimple=oe({isReact:!0,maxSize:1}),oe.serialize=oe({isSerialized:!0}),oe.simple=oe({maxSize:1}),e.collectStats=y,e.default=oe,Object.defineProperty(e,"__esModule",{value:!0})}(n)}))),Ho=n(t((function(e,n){
/*!

	 diff v4.0.1

	Software License Agreement (BSD License)

	Copyright (c) 2009-2015, Kevin Decker <kpdecker@gmail.com>

	All rights reserved.

	Redistribution and use of this software in source and binary forms, with or without modification,
	are permitted provided that the following conditions are met:

	* Redistributions of source code must retain the above
	  copyright notice, this list of conditions and the
	  following disclaimer.

	* Redistributions in binary form must reproduce the above
	  copyright notice, this list of conditions and the
	  following disclaimer in the documentation and/or other
	  materials provided with the distribution.

	* Neither the name of Kevin Decker nor the names of its
	  contributors may be used to endorse or promote products
	  derived from this software without specific prior
	  written permission.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR
	IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
	FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
	DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
	DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
	IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
	OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	@license
	*/
!function(e){function n(){}function t(e,n,t,r,i){for(var o=0,a=n.length,u=0,s=0;o<a;o++){var c=n[o];if(c.removed){if(c.value=e.join(r.slice(s,s+c.count)),s+=c.count,o&&n[o-1].added){var l=n[o-1];n[o-1]=n[o],n[o]=l}}else{if(!c.added&&i){var f=t.slice(u,u+c.count);f=f.map((function(e,n){var t=r[s+n];return t.length>e.length?t:e})),c.value=e.join(f)}else c.value=e.join(t.slice(u,u+c.count));u+=c.count,c.added||(s+=c.count)}}var h=n[a-1];return a>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(n[a-2].value+=h.value,n.pop()),n}function r(e){return{newPos:e.newPos,components:e.components.slice(0)}}n.prototype={diff:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.callback;"function"==typeof i&&(o=i,i={}),this.options=i;var a=this;function u(e){return o?(setTimeout((function(){o(void 0,e)}),0),!0):e}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e));var s=(n=this.removeEmpty(this.tokenize(n))).length,c=e.length,l=1,f=s+c,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=s&&p+1>=c)return u([{value:this.join(n),count:n.length}]);function d(){for(var i=-1*l;i<=l;i+=2){var o=void 0,f=h[i-1],p=h[i+1],d=(p?p.newPos:0)-i;f&&(h[i-1]=void 0);var v=f&&f.newPos+1<s,y=p&&0<=d&&d<c;if(v||y){if(!v||y&&f.newPos<p.newPos?(o=r(p),a.pushComponent(o.components,void 0,!0)):((o=f).newPos++,a.pushComponent(o.components,!0,void 0)),d=a.extractCommon(o,n,e,i),o.newPos+1>=s&&d+1>=c)return u(t(a,o.components,n,e,a.useLongestToken));h[i]=o}else h[i]=void 0}l++}if(o)!function e(){setTimeout((function(){if(l>f)return o();d()||e()}),0)}();else for(;l<=f;){var v=d();if(v)return v}},pushComponent:function(e,n,t){var r=e[e.length-1];r&&r.added===n&&r.removed===t?e[e.length-1]={count:r.count+1,added:n,removed:t}:e.push({count:1,added:n,removed:t})},extractCommon:function(e,n,t,r){for(var i=n.length,o=t.length,a=e.newPos,u=a-r,s=0;a+1<i&&u+1<o&&this.equals(n[a+1],t[u+1]);)a++,u++,s++;return s&&e.components.push({count:s}),e.newPos=a,u},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var i=new n;function o(e,n,t){return i.diff(e,n,t)}function a(e,n){if("function"==typeof e)n.callback=e;else if(e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}var u=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,s=/\S/,c=new n;function l(e,n,t){return t=a(t,{ignoreWhitespace:!0}),c.diff(e,n,t)}function f(e,n,t){return c.diff(e,n,t)}c.equals=function(e,n){return this.options.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n||this.options.ignoreWhitespace&&!s.test(e)&&!s.test(n)},c.tokenize=function(e){for(var n=e.split(/(\s+|[()[\]{}'"]|\b)/),t=0;t<n.length-1;t++)!n[t+1]&&n[t+2]&&u.test(n[t])&&u.test(n[t+2])&&(n[t]+=n[t+2],n.splice(t+1,2),t--);return n};var h=new n;function p(e,n,t){return h.diff(e,n,t)}function d(e,n,t){var r=a(t,{ignoreWhitespace:!0});return h.diff(e,n,r)}h.tokenize=function(e){var n=[],t=e.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var r=0;r<t.length;r++){var i=t[r];r%2&&!this.options.newlineIsToken?n[n.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),n.push(i))}return n};var v=new n;function y(e,n,t){return v.diff(e,n,t)}v.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var g=new n;function m(e,n,t){return g.diff(e,n,t)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return _(e)||x(e)||k()}function _(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}function x(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance")}g.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var S=Object.prototype.toString,C=new n;function O(e,n,t){return C.diff(e,n,t)}function A(e,n,t,r,i){var o,a;for(n=n||[],t=t||[],r&&(e=r(i,e)),o=0;o<n.length;o+=1)if(n[o]===e)return t[o];if("[object Array]"===S.call(e)){for(n.push(e),a=new Array(e.length),t.push(a),o=0;o<e.length;o+=1)a[o]=A(e[o],n,t,r,i);return n.pop(),t.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),"object"===b(e)&&null!==e){n.push(e),a={},t.push(a);var u,s=[];for(u in e)e.hasOwnProperty(u)&&s.push(u);for(s.sort(),o=0;o<s.length;o+=1)a[u=s[o]]=A(e[u],n,t,r,u);n.pop(),t.pop()}else a=e;return a}C.useLongestToken=!0,C.tokenize=h.tokenize,C.castInput=function(e){var n=this.options,t=n.undefinedReplacement,r=n.stringifyReplacer,i=void 0===r?function(e,n){return void 0===n?t:n}:r;return"string"==typeof e?e:JSON.stringify(A(e,null,null,i),i,"  ")},C.equals=function(e,t){return n.prototype.equals.call(C,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var E=new n;function j(e,n,t){return E.diff(e,n,t)}function P(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.split(/\r\n|[\n\v\f\r\x85]/),r=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function a(){var e={};for(i.push(e);o<t.length;){var r=t[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(r))break;var a=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(r);a&&(e.index=a[1]),o++}for(u(e),u(e),e.hunks=[];o<t.length;){var c=t[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(c))break;if(/^@@/.test(c))e.hunks.push(s());else{if(c&&n.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(c));o++}}}function u(e){var n=/^(---|\+\+\+)\s+(.*)$/.exec(t[o]);if(n){var r="---"===n[1]?"old":"new",i=n[2].split("\t",2),a=i[0].replace(/\\\\/g,"\\");/^".*"$/.test(a)&&(a=a.substr(1,a.length-2)),e[r+"FileName"]=a,e[r+"Header"]=(i[1]||"").trim(),o++}}function s(){for(var e=o,i=t[o++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),a={oldStart:+i[1],oldLines:+i[2]||1,newStart:+i[3],newLines:+i[4]||1,lines:[],linedelimiters:[]},u=0,s=0;o<t.length&&!(0===t[o].indexOf("--- ")&&o+2<t.length&&0===t[o+1].indexOf("+++ ")&&0===t[o+2].indexOf("@@"));o++){var c=0==t[o].length&&o!=t.length-1?" ":t[o][0];if("+"!==c&&"-"!==c&&" "!==c&&"\\"!==c)break;a.lines.push(t[o]),a.linedelimiters.push(r[o]||"\n"),"+"===c?u++:"-"===c?s++:" "===c&&(u++,s++)}if(u||1!==a.newLines||(a.newLines=0),s||1!==a.oldLines||(a.oldLines=0),n.strict){if(u!==a.newLines)throw new Error("Added line count did not match for hunk at line "+(e+1));if(s!==a.oldLines)throw new Error("Removed line count did not match for hunk at line "+(e+1))}return a}for(;o<t.length;)a();return i}function T(e,n,t){var r=!0,i=!1,o=!1,a=1;return function u(){if(r&&!o){if(i?a++:r=!1,e+a<=t)return a;o=!0}if(!i)return o||(r=!0),n<=e-a?-a++:(i=!0,u())}}function I(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof n&&(n=P(n)),Array.isArray(n)){if(n.length>1)throw new Error("applyPatch only works with a single input.");n=n[0]}var r,i,o=e.split(/\r\n|[\n\v\f\r\x85]/),a=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],u=n.hunks,s=t.compareLine||function(e,n,t,r){return n===r},c=0,l=t.fuzzFactor||0,f=0,h=0;function p(e,n){for(var t=0;t<e.lines.length;t++){var r=e.lines[t],i=r.length>0?r[0]:" ",a=r.length>0?r.substr(1):r;if(" "===i||"-"===i){if(!s(n+1,o[n],i,a)&&++c>l)return!1;n++}}return!0}for(var d=0;d<u.length;d++){for(var v=u[d],y=o.length-v.oldLines,g=0,m=h+v.oldStart-1,b=T(m,f,y);void 0!==g;g=b())if(p(v,m+g)){v.offset=h+=g;break}if(void 0===g)return!1;f=v.offset+v.oldStart+v.oldLines}for(var w=0,_=0;_<u.length;_++){var x=u[_],k=x.oldStart+x.offset+w-1;w+=x.newLines-x.oldLines,k<0&&(k=0);for(var S=0;S<x.lines.length;S++){var C=x.lines[S],O=C.length>0?C[0]:" ",A=C.length>0?C.substr(1):C,E=x.linedelimiters[S];if(" "===O)k++;else if("-"===O)o.splice(k,1),a.splice(k,1);else if("+"===O)o.splice(k,0,A),a.splice(k,0,E),k++;else if("\\"===O){var j=x.lines[S-1]?x.lines[S-1][0]:null;"+"===j?r=!0:"-"===j&&(i=!0)}}}if(r)for(;!o[o.length-1];)o.pop(),a.pop();else i&&(o.push(""),a.push("\n"));for(var I=0;I<o.length-1;I++)o[I]=o[I]+a[I];return o.join("")}function M(e,n){"string"==typeof e&&(e=P(e));var t=0;function r(){var i=e[t++];if(!i)return n.complete();n.loadFile(i,(function(e,t){if(e)return n.complete(e);var o=I(t,i,n);n.patched(i,o,(function(e){if(e)return n.complete(e);r()}))}))}r()}function K(e,n,t,r,i,o,a){a||(a={}),void 0===a.context&&(a.context=4);var u=p(t,r,a);function s(e){return e.map((function(e){return" "+e}))}u.push({value:"",lines:[]});for(var c=[],l=0,f=0,h=[],d=1,v=1,y=function(e){var n=u[e],i=n.lines||n.value.replace(/\n$/,"").split("\n");if(n.lines=i,n.added||n.removed){var o;if(!l){var p=u[e-1];l=d,f=v,p&&(h=a.context>0?s(p.lines.slice(-a.context)):[],l-=h.length,f-=h.length)}(o=h).push.apply(o,w(i.map((function(e){return(n.added?"+":"-")+e})))),n.added?v+=i.length:d+=i.length}else{if(l)if(i.length<=2*a.context&&e<u.length-2){var y;(y=h).push.apply(y,w(s(i)))}else{var g,m=Math.min(i.length,a.context);(g=h).push.apply(g,w(s(i.slice(0,m))));var b={oldStart:l,oldLines:d-l+m,newStart:f,newLines:v-f+m,lines:h};if(e>=u.length-2&&i.length<=a.context){var _=/\n$/.test(t),x=/\n$/.test(r),k=0==i.length&&h.length>b.oldLines;!_&&k&&h.splice(b.oldLines,0,"\\ No newline at end of file"),(_||k)&&x||h.push("\\ No newline at end of file")}c.push(b),l=0,f=0,h=[]}d+=i.length,v+=i.length}},g=0;g<u.length;g++)y(g);return{oldFileName:e,newFileName:n,oldHeader:i,newHeader:o,hunks:c}}function F(e,n,t,r,i,o,a){var u=K(e,n,t,r,i,o,a),s=[];e==n&&s.push("Index: "+e),s.push("==================================================================="),s.push("--- "+u.oldFileName+(void 0===u.oldHeader?"":"\t"+u.oldHeader)),s.push("+++ "+u.newFileName+(void 0===u.newHeader?"":"\t"+u.newHeader));for(var c=0;c<u.hunks.length;c++){var l=u.hunks[c];s.push("@@ -"+l.oldStart+","+l.oldLines+" +"+l.newStart+","+l.newLines+" @@"),s.push.apply(s,l.lines)}return s.join("\n")+"\n"}function D(e,n,t,r,i,o){return F(e,e,n,t,r,i,o)}function R(e,n){return e.length===n.length&&N(e,n)}function N(e,n){if(n.length>e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function L(e){var n=te(e.lines),t=n.oldLines,r=n.newLines;void 0!==t?e.oldLines=t:delete e.oldLines,void 0!==r?e.newLines=r:delete e.newLines}function z(e,n,t){e=B(e,t),n=B(n,t);var r={};(e.index||n.index)&&(r.index=e.index||n.index),(e.newFileName||n.newFileName)&&(q(e)?q(n)?(r.oldFileName=H(r,e.oldFileName,n.oldFileName),r.newFileName=H(r,e.newFileName,n.newFileName),r.oldHeader=H(r,e.oldHeader,n.oldHeader),r.newHeader=H(r,e.newHeader,n.newHeader)):(r.oldFileName=e.oldFileName,r.newFileName=e.newFileName,r.oldHeader=e.oldHeader,r.newHeader=e.newHeader):(r.oldFileName=n.oldFileName||e.oldFileName,r.newFileName=n.newFileName||e.newFileName,r.oldHeader=n.oldHeader||e.oldHeader,r.newHeader=n.newHeader||e.newHeader)),r.hunks=[];for(var i=0,o=0,a=0,u=0;i<e.hunks.length||o<n.hunks.length;){var s=e.hunks[i]||{oldStart:1/0},c=n.hunks[o]||{oldStart:1/0};if(U(s,c))r.hunks.push(W(s,a)),i++,u+=s.newLines-s.oldLines;else if(U(c,s))r.hunks.push(W(c,u)),o++,a+=c.newLines-c.oldLines;else{var l={oldStart:Math.min(s.oldStart,c.oldStart),oldLines:0,newStart:Math.min(s.newStart+a,c.oldStart+u),newLines:0,lines:[]};$(l,s.oldStart,s.lines,c.oldStart,c.lines),o++,i++,r.hunks.push(l)}}return r}function B(e,n){if("string"==typeof e){if(/^@@/m.test(e)||/^Index:/m.test(e))return P(e)[0];if(!n)throw new Error("Must provide a base reference or pass in a patch");return K(void 0,void 0,n,e)}return e}function q(e){return e.newFileName&&e.newFileName!==e.oldFileName}function H(e,n,t){return n===t?n:(e.conflict=!0,{mine:n,theirs:t})}function U(e,n){return e.oldStart<n.oldStart&&e.oldStart+e.oldLines<n.oldStart}function W(e,n){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+n,newLines:e.newLines,lines:e.lines}}function $(e,n,t,r,i){var o={offset:n,lines:t,index:0},a={offset:r,lines:i,index:0};for(J(e,o,a),J(e,a,o);o.index<o.lines.length&&a.index<a.lines.length;){var u=o.lines[o.index],s=a.lines[a.index];if("-"!==u[0]&&"+"!==u[0]||"-"!==s[0]&&"+"!==s[0])if("+"===u[0]&&" "===s[0]){var c;(c=e.lines).push.apply(c,w(X(o)))}else if("+"===s[0]&&" "===u[0]){var l;(l=e.lines).push.apply(l,w(X(a)))}else"-"===u[0]&&" "===s[0]?G(e,o,a):"-"===s[0]&&" "===u[0]?G(e,a,o,!0):u===s?(e.lines.push(u),o.index++,a.index++):Y(e,X(o),X(a));else V(e,o,a)}Q(e,o),Q(e,a),L(e)}function V(e,n,t){var r=X(n),i=X(t);if(ee(r)&&ee(i)){var o,a;if(N(r,i)&&ne(t,r,r.length-i.length))return void(o=e.lines).push.apply(o,w(r));if(N(i,r)&&ne(n,i,i.length-r.length))return void(a=e.lines).push.apply(a,w(i))}else if(R(r,i)){var u;return void(u=e.lines).push.apply(u,w(r))}Y(e,r,i)}function G(e,n,t,r){var i,o=X(n),a=Z(t,o);a.merged?(i=e.lines).push.apply(i,w(a.merged)):Y(e,r?a:o,r?o:a)}function Y(e,n,t){e.conflict=!0,e.lines.push({conflict:!0,mine:n,theirs:t})}function J(e,n,t){for(;n.offset<t.offset&&n.index<n.lines.length;){var r=n.lines[n.index++];e.lines.push(r),n.offset++}}function Q(e,n){for(;n.index<n.lines.length;){var t=n.lines[n.index++];e.lines.push(t)}}function X(e){for(var n=[],t=e.lines[e.index][0];e.index<e.lines.length;){var r=e.lines[e.index];if("-"===t&&"+"===r[0]&&(t="+"),t!==r[0])break;n.push(r),e.index++}return n}function Z(e,n){for(var t=[],r=[],i=0,o=!1,a=!1;i<n.length&&e.index<e.lines.length;){var u=e.lines[e.index],s=n[i];if("+"===s[0])break;if(o=o||" "!==u[0],r.push(s),i++,"+"===u[0])for(a=!0;"+"===u[0];)t.push(u),u=e.lines[++e.index];s.substr(1)===u.substr(1)?(t.push(u),e.index++):a=!0}if("+"===(n[i]||"")[0]&&o&&(a=!0),a)return t;for(;i<n.length;)r.push(n[i++]);return{merged:r,changes:t}}function ee(e){return e.reduce((function(e,n){return e&&"-"===n[0]}),!0)}function ne(e,n,t){for(var r=0;r<t;r++){var i=n[n.length-t+r].substr(1);if(e.lines[e.index+r]!==" "+i)return!1}return e.index+=t,!0}function te(e){var n=0,t=0;return e.forEach((function(e){if("string"!=typeof e){var r=te(e.mine),i=te(e.theirs);void 0!==n&&(r.oldLines===i.oldLines?n+=r.oldLines:n=void 0),void 0!==t&&(r.newLines===i.newLines?t+=r.newLines:t=void 0)}else void 0===t||"+"!==e[0]&&" "!==e[0]||t++,void 0===n||"-"!==e[0]&&" "!==e[0]||n++})),{oldLines:n,newLines:t}}function re(e){for(var n,t,r=[],i=0;i<e.length;i++)t=(n=e[i]).added?1:n.removed?-1:0,r.push([t,n.value]);return r}function ie(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];r.added?n.push("<ins>"):r.removed&&n.push("<del>"),n.push(oe(r.value)),r.added?n.push("</ins>"):r.removed&&n.push("</del>")}return n.join("")}function oe(e){var n=e;return n=(n=(n=(n=n.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}E.tokenize=function(e){return e.slice()},E.join=E.removeEmpty=function(e){return e},e.Diff=n,e.diffChars=o,e.diffWords=l,e.diffWordsWithSpace=f,e.diffLines=p,e.diffTrimmedLines=d,e.diffSentences=y,e.diffCss=m,e.diffJson=O,e.diffArrays=j,e.structuredPatch=K,e.createTwoFilesPatch=F,e.createPatch=D,e.applyPatch=I,e.applyPatches=M,e.parsePatch=P,e.merge=z,e.convertChangesToDMP=re,e.convertChangesToXML=ie,e.canonicalize=A,Object.defineProperty(e,"__esModule",{value:!0})}(n)})));const Uo=e=>-1===["ja","zh","zs"].indexOf(e),Wo=qo((function(e,n,t){return e.localeCompare(n,t,{ignorePunctuation:!0,numeric:!0,sensitivity:"accent",usage:"sort"})}));function $o(e,n,t){let r=e;var i;return t&&(r=r.filter(e=>!/[^\s]\s+[^\s]/.test(e))),"en"===n?r=r.filter(e=>1===e.length||-1===e.indexOf("&")||!/(^|[^&\s])&([^&\s]|$)/.test(e)):"fr"===n&&(r=r.filter(e=>"oÃ¹"===e||-1===e.indexOf("Ã¹"))),r.length>1&&(i=r.sort((e,t)=>Wo(e,t,n)),r=Ro(i,()=>-1)),r.length>1&&(r=Ro(r,(e,n,t)=>n===t?-1:e===t?1:0,e=>e.normalize("NFD").replace(/\p{M}/u,"").replace(/[^\p{L}\p{N}]/u,""))),r}function Vo(e,n,t){let r=$o(e.map(e=>String(e.orig||e.lenient||"")),n,t);return{token:r,solutionBase:{reference:r[0]||"",isComplex:r.length>1}}}const Go={size:0};function Yo(e,n,t){let r=function e(n,t,r,i){if(!n[t])return[];if(Eo(n[t].solutions))return n[t].solutions;let o=[];for(const a of Object.keys(n[t])){const u=Number(a),s=n[t][u],c=e(n,u,r,i),{token:l,solutionBase:f}=Vo(s,r,i);if(c.length>0)for(const e of c)o.push({locale:r,reference:f.reference+e.reference,isComplex:f.isComplex||e.isComplex,tokens:0===l.length?e.tokens:{token:l,next:e.tokens,size:e.tokens.size+1}});else u===n.length-1&&(f.locale=r,f.tokens=0===l.length?Go:{token:l,next:Go,size:1},o.push(f))}return n[t].solutions=o,o}(e.map(e=>Do(e.filter(e=>{return!(n=e).auto&&"typo"!==n.type;var n}),e=>e.to)),0,n,t);for(const e of r){let n=0,t=e.tokens;const r=new Array(e.tokens.size);for(;t.token;)r[n++]=t.token,t=t.next;e.tokens=r}return r=Object.values(Do(r,e=>e.reference)).flatMap(e=>e.length<=1?e:e.some(e=>e.isComplex)?e.filter(e=>e.isComplex):e.slice(-1)),r}function Jo(e,n){return e.filter(Ao).map(e=>{const t=Lo(e),r=t.split(/([\p{L}\p{N}]+)/gu).map(e=>[e]);return{locale:n,reference:t,tokens:r,isComplex:!1}})}const Qo=Symbol("summary");const Xo=qo((e,n)=>zo(Lo(e,!0,!1).toLocaleLowerCase(n))),Zo=qo((e,n)=>zo(Lo(e,!0,!0).toLocaleLowerCase(n)));function ea(e,n,t){const r=new Set,i=e.tokens.map(n=>n.map(e=>e.trim()).filter(e=>""!==e).map(n=>{const i=((e,n,t)=>t.ignoreDiacritics?Zo(e,n):Xo(e,n))(n,e.locale,t);return i.forEach(e=>r.add(e)),i})).filter(e=>e.length>0);e.matchingData={id:n,tokens:i,words:Array.from(r)}}function na(e,n,t){var r;const i=Lo(function(e){if(!e[Qo]){const n=Uo(e.locale)?"":" ";e[Qo]=e.tokens.reduce((e,t)=>e+(1===t.length?t[0]:`${n}[${n}${t.join(" / ")}${n}]${n}`),"")}return e[Qo]}(e),!0,t.ignoreDiacritics).toLocaleLowerCase(e.locale),o=(null===(r=/^[^\p{L}\p{N}]*(.*?)[^\p{L}\p{N}]*?$/gu.exec(i))||void 0===r?void 0:r[1])||i;e.matchingData={id:n,summary:o}}const ta={charCount:0,wordCount:0,bigramMap:new Map},ra=Symbol("word_stats");function ia(e){const n=new Map;if(e.length<=2)n.set(e,(n.get(e)||0)+1);else for(let t=0,r=e.length-1;t<r;t++){const r=e.substring(t,t+2);n.set(r,(n.get(r)||0)+1)}return n}const oa=e=>({charCount:e.length,wordCount:1,bigramMap:ia(e)}),aa=e=>0===e.length?ta:{charCount:Fo(e,e=>e.charCount),wordCount:Fo(e,e=>e.wordCount),bigramMap:Bo((e,n)=>e+n,...e.map(e=>e.bigramMap))};function ua(e,n,t){const r=function(e){if(!e.matchingData)return{shared:ta};if(!e[ra]){const{false:n=[],true:t=[]}=Do(e.matchingData.tokens,e=>e.length>1);e[ra]={shared:aa(n.flatMap(e=>e[0].map(e=>oa(e))))};const r=t.map(e=>e.map(e=>aa(e.map(e=>oa(e)))));if(r.length>0){const n=No(r);e[ra].paths=n.map(aa)}}return e[ra]}(e),i=aa(((e,n,t)=>zo(Lo(e,!0,t.ignoreDiacritics).toLocaleLowerCase(n)))(n,e.locale,t).map(oa)),o=i.charCount+r.shared.charCount,a=i.wordCount+r.shared.wordCount;let u=0;for(const[e,n]of i.bigramMap){const t=r.shared.bigramMap.get(e)||0;t>0&&(u+=Math.min(n,t),i.bigramMap.set(e,Math.max(0,n-t)))}return r.paths?r.paths.map(e=>{let n=0;for(const[t,r]of i.bigramMap){const i=e.bigramMap.get(t)||0;i>0&&(n+=Math.min(r,i))}const t=o+e.charCount,r=a+e.wordCount;return 2*(u+n)/(t-r)}):[2*u/(o-a)]}const sa=(e,n)=>(e.type&n)>0;const ca=e=>{var n;return(null===(n=e.solutions[0])||void 0===n?void 0:n.locale)||null};function la(e){if(!jo(e.matchingData)){const n=ca(e),t={ignoreDiacritics:!1,ignoreWordOrder:!0};if(e.matchingData={matchingOptions:t,locale:n},Uo(n)){const n=new Set;e.solutions.forEach((e,r)=>{ea(e,r,t);for(const t of e.matchingData.words)n.add(t)}),e.matchingData.words=Array.from(n)}else e.solutions.forEach((e,n)=>na(e,n,t))}}function fa(e,n){la(e),""!==n&&e.matchingData.words&&e.solutions.forEach(t=>{t.score=((e,n,t)=>Ko(ua(e,n,t)))(t,n,e.matchingData.matchingOptions)})}function getUiChallengeSolutions(e){const n=jo(e.grader)?e.grader:{},t=jo(e.metadata)?e.metadata:{},r=String(e.targetLanguage||n.language||t.target_language||t.language||"").trim();return Eo(e.correctSolutions)&&_o.indexOf(e.type)>=0?Jo(e.correctSolutions,r):jo(n)&&Eo(n.vertices)&&n.vertices.length>0?Yo(n.vertices,r,!!n.whitespaceDelimited):Ao(e.prompt)&&""!==e.prompt&&wo.indexOf(e.type)>=0?Jo([e.prompt],r):Eo(e.correctTokens)&&xo.indexOf(e.type)>=0?function(e,n){const t=e.filter(Ao),r=Lo(t.join(" "));if(""!==r){const e=t.flatMap(e=>[[e],[" "]]);return e.pop(),[{locale:n,reference:r,tokens:e,isComplex:!1}]}return[]}(e.correctTokens,r):[]}function ha(e){return`[${e.join("+")}]`}const pa="comment_challenges",da="comment_discussions",va="discussion_challenges",ya="discussion_comments",ga="challenge",ma="comment_id",ba="discussion_id",wa="inverted_size",_a="last_access_at",xa="locale",ka="user_reference",Sa=ha([ba,xa]),Ca=ha([_a,wa]),Oa=1048576,Aa=new go("duolingo-solution-viewer");function Ea(){return Math.floor((new Date).getTime()/1e3/60/30)}async function ja(e,n){try{await Aa[e].put(n)}catch(r){var t;if("QuotaExceededError"===r.name||"QuotaExceededError"===(null===(t=r.inner)||void 0===t?void 0:t.name)){let t=0;const r=e=>(t+=Oa-(e[wa]||Oa),t>=Oa),i=await Aa.discussion_challenges.orderBy(Ca).until(r,!0).toArray().map(e=>[e[ba],e.locale]);await Aa.discussion_challenges.bulkDelete(i),await Aa[e].put(n)}}}function Pa(e){var n;return`${String((null===(n=e.tab)||void 0===n?void 0:n.id)||"global")}-${String(e.frameId||"main")}`}Aa.version(1).stores({[ya]:[ba].join(","),[pa]:[ma,wa,_a,Ca].join(",")}),Aa.version(2).stores({[da]:[ma].join(","),[va]:[Sa,Ca].join(",")}).upgrade(async()=>{await Aa.table(pa).count(async e=>{const n=Math.ceil(e/200);for(let e=0;e<n;e++){const n=[],t=[];await Aa.table(pa).offset(200*e).limit(200).each(e=>{const r=e.challenge.discussionId,i=(o=e.challenge,a=o.fromLanguage,u=ca(o),a===u||"zh"===a&&"zs"===u||"zs"===a&&"zh"===u?o.toLanguage:o.fromLanguage);var o,a,u;const s={[ma]:e[ma],[ba]:r,[xa]:i};e[ba]=r,e.locale=i,delete e[ma],n.push(s),t.push(e)}),await Aa.table(da).bulkPut(n),await Aa.table(va).bulkPut(t)}}),await Aa.table(pa).clear(),await Aa.table(ya).clear()}),Aa.version(3).upgrade(async()=>{await Aa.table(va).count(async e=>{const n=Math.ceil(e/200);for(let e=0;e<n;e++){const n=[],t=[];await Aa.table(va).offset(200*e).limit(200).each(e=>{t.push([e[ba],e.locale]),sa(e.challenge,4)||(e.locale=ca(e.challenge),n.push(e))}),await Aa.table(va).bulkDelete(t),await Aa.table(va).bulkPut(n)}}),await Aa.table(da).clear()});const Ta=[],Ia={};async function Ma(e){let n=await Aa.comment_discussions.get(e);if(jo(n)){const t=[n[ba],n.locale];if(n=await Aa.discussion_challenges.where(Sa).equals(t).first(),jo(n)){try{await Aa.discussion_challenges.update(t,{[_a]:Ea()})}catch(e){}return{commentId:e,challenge:n.challenge,userReference:n.user_reference}}}throw new Error(`There is no challenge for comment #${e}.`)}const Ka=async e=>Promise.all(e.map(e=>async function(e){if(!e.discussionId)return Promise.resolve();const n=JSON.stringify(e).length;if(n>Oa)throw new Error(`The discussion #${e.discussionId} has a challenge whose serialized size exceeds the limit.`);await ja(va,{[ba]:e.discussionId,[xa]:ca(e),[ga]:e,[wa]:Oa-n,[_a]:Ea()})}(e)));async function Fa(e,n){e.discussionId&&await Aa.discussion_challenges.update([e.discussionId,ca(e)],{[ka]:n,[_a]:Ea()})}function Da(e,n,t){return Eo(Ta[e])?Ta[e].find(e=>sa(e,n)&&t(e)):null}async function Ra(e,n,t,r){Ta[e]=function(e,n,t){return e.map(e=>{const r=getUiChallengeSolutions(e);if(r.length>0){const i=Lo(String(e.prompt||"")),o=String(e.sentenceDiscussionId||"").trim();if(""!==i&&bo.indexOf(e.type)>=0)return{type:_o.indexOf(e.type)>=0?3:1,statement:i,solutions:r,fromLanguage:n,toLanguage:t,discussionId:o};if(wo.indexOf(e.type)>=0&&""!==String(e.solutionTranslation||"").trim()){const a=Lo(String(e.solutionTranslation)),u=String(e.tts||"").trim(),s=String(e.slowTts||"").trim();return{type:4,statement:i,solutions:r,fromLanguage:n,toLanguage:t,discussionId:o,solutionTranslation:a,ttsMediaUrl:u,slowTtsMediaUrl:s}}}}).filter(jo)}(n,t,r),await Ka(Ta[e].filter(e=>sa(e,1)))}async function Na(e,n,t){if(jo(n)){let r,i=()=>!0;const o=Ao(n.userAnswer)?Lo(n.userAnswer):"";if(Ao(n.solutionTranslation)){const e=Lo(n.solutionTranslation);i=n=>e===n.solutionTranslation}if(r=function(e,n,t){return Eo(Ta[e])?Ta[e].filter(e=>sa(e,n)&&t(e)):[]}(e,4,i),0===r.length)return;const a=Ia[e];let u=1===r.length?r.pop():Ia[e]&&r.find(e=>{return t=a,!!(n=e).ttsMediaUrl&&n.ttsMediaUrl===t.ttsMediaUrl||!!n.slowTtsMediaUrl&&n.slowTtsMediaUrl===t.slowTtsMediaUrl;var n,t});if(!jo(u))return;fa(u,o);const s={challenge:u};if(""!==o&&"correct"===n.result){const e=u.matchingData.matchingOptions;let n;if(u.solutions.some(e=>"score"in e)){const t=Mo(u.solutions,e=>e.score);n=u.solutions.filter(e=>t===e.score).flatMap(n=>function(e,n,t){if(!e.isComplex)return[e.reference];const r=e.tokens.length;if(0===r)return[];const i=ua(e,n,t),o=Ko(i),a=[e.tokens[r-1].length,1];for(let n=r-2;n>=1;n--)a.unshift(a[0]*e.tokens[n].length);return i.map((n,t)=>{if(n<o)return null;let i=t,u="";for(let n=0;n<r;n++)if(1===e.tokens[n].length)u+=e.tokens[n][0];else{const t=Math.floor(i/a[n]);u+=e.tokens[n][t],i%=a[n]}return u}).filter(Ao)}(n,o,e))}else n=u.solutions.flatMap(e=>No(e.tokens.map(e=>e)).map(e=>e.join("")));const t=n.map(n=>function(e,n,t){const r=Ho.diffChars(Lo(e).toLocaleLowerCase(t),Lo(n).toLocaleLowerCase(t)).flatMap(e=>{const n=[];if(e.added=!!e.added,e.removed=!!e.removed,e.added||e.removed){const t=[...e.value.matchAll(/[\p{P}\p{Z}]+/gu)].reduce((t,r)=>(r.index>t&&n.push({added:e.added,removed:e.removed,value:e.value.substring(t,r.index),count:r.index-t}),n.push({added:e.added,removed:e.removed,ignorable:!0,value:r[0],count:r[0].length}),r.index+r[0].length),0);t>0&&t<e.value.length&&n.push({added:e.added,removed:e.removed,value:e.value.substring(t,e.length),count:e.value.length-t})}return 0===n.length&&n.push(e),n});if(!r.some(e=>(e.added||e.removed)&&!e.ignorable))return null;const{result:i}=r.reduce(({result:e,left:n,right:t},r)=>{if(r.added)return e.push(r),{result:e,left:n,right:t.substring(r.value.length)};if(r.removed)return e.push(r),{result:e,right:t,left:n.substring(r.value.length)};const i=n.substring(0,r.value.length),o=t.substring(0,r.value.length),a=Ho.diffChars(i,o);return a.forEach(e=>{e.added=!!e.added,e.removed=!!e.removed,(e.added||e.removed)&&(e.ignorable=!0)}),e.push(...a),{result:e,left:n.substring(r.value.length),right:t.substring(r.value.length)}},{result:[],left:e,right:n});return i}(n,o,e));t.every(e=>Eo(e))&&(s.correctionDiff=Io(t,e=>e.length,To))}t(s)}}async function La(e,n,t,r){let i=!1;try{const o=e=>{i=!0,r({type:"success",value:e})};switch(e){case"get_current_translation_challenge":await async function(e,n,t){if(jo(n)&&Ao(n.statement)&&Eo(Ta[e])){const r=Lo(n.statement),i=Ao(n.userAnswer)?Lo(n.userAnswer):"";let o=Da(e,1,e=>r===e.statement);if(o||(o=Da(e,3,r.indexOf(e=>e.statement)>=0)),!jo(o))return;fa(o,i),t(o),""!==i&&await Fa(o,i)}}(Pa(t),n,o);break;case"get_current_listening_challenge":await Na(Pa(t),n,o);break;case"update_current_challenge_user_reference":await async function(e,n,t){if(jo(n)&&Ao(n.key)&&Ao(n.userReference)&&""!==n.userReference.trim()){const r=n.userReference.trim(),i=Da(e,1,e=>(e=>e.discussionId||`_duo-sv_-${e.type}-${e.statement}`)(e)===n.key);jo(i)&&(await Fa(i,r),fa(i,r),t({challenge:i,userReference:r}))}}(Pa(t),n,o);break;case"get_comment_challenge":await async function(e,n){if(Oo(e)&&e>0){const t=await Ma(e);Ao(t.userReference)&&""!==t.userReference?fa(t.challenge,t.userReference):la(t.challenge),n(t)}}(n,o);break;case"update_comment_challenge_user_reference":await async function(e,n){if(jo(e)&&Oo(e.commentId)&&e.commentId>0&&Ao(e.userReference)&&""!==e.userReference.trim()){const t=e.userReference.trim(),{challenge:r}=await Ma(e.commentId);await Fa(r,t),fa(r,t),n({challenge:r,userReference:t})}}(n,o)}if(!i)throw new Error(`Could not handle action: "${n.action}".`)}catch(e){i||r({type:"failure"})}}async function za(e){jo(e)&&Oo(e.commentId)&&e.commentId>0&&Ao(e.discussionId)&&""!==e.discussionId&&Ao(e.locale)&&""!==e.locale&&await async function(e,n,t){await ja(da,{[ma]:e,[ba]:n,[xa]:t})}(e.commentId,e.discussionId,e.locale)}async function Ba(e,n,t){const r=Pa(t);"session_loaded"===e?await async function(e,n){if(jo(n)){var t,r;const i=Eo(n.challenges)?n.challenges:[],o=Eo(n.adaptiveChallenges)?n.adaptiveChallenges:[],a=[n.metadata,null===(t=i[0])||void 0===t?void 0:t.metadata,null===(r=o[0])||void 0===r?void 0:r.metadata].find(e=>jo(e))||{};await Ra(e,i.concat(o),String(a.ui_language||a.from_language||n.fromLanguage||"").trim(),String(a.language||a.learning_language||n.learningLanguage||"").trim())}}(r,n):"discussion_loaded"===e?await za(n):"sound_played"===e&&function(e,n){if(Ao(n)){const t=n.trim();if(""!==t){const n=Da(e,4,e=>t===e.ttsMediaUrl||t===e.slowTtsMediaUrl);jo(n)&&(Ia[e]=n)}}}(r,n)}Aa.open().then(()=>{chrome.runtime.onMessage.addListener((e,n,t)=>("_duo-sv_-action_request_"===e.type?Co(La(e.action,e.value,n,t)):"_duo-sv_-ui_event_notification_"===e.type&&Co(Ba(e.event,e.value,n)),!0))})}();
