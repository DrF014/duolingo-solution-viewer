!function(){"use strict";const t="sound_played";function e(t,e){window.postMessage({type:"_duo-sv_-ui_event_notification_",event:t,value:e},"*")}const o=Array.isArray,n=t=>"object"==typeof t&&!!t&&!o(t);const s=/\/[\d]{4}-[\d]{2}-[\d]{2}\/sessions/g,i=/\/comments\/([\d]+)/g,c=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,o,r,a,l){const p=o.match(s),d=o.match(i);return(p||d)&&this.addEventListener("load",()=>{try{const t=n(this.response)?this.response:JSON.parse(this.responseText);n(t)&&(p?e("session_loaded",t):t.id>0&&t.sentence_id&&t.translation_language&&e("discussion_loaded",{commentId:Number(t.id),discussionId:String(t.sentence_id).trim(),locale:String(t.translation_language).trim()}))}catch(t){}}),c.call(this,t,o,r,a,l)};let r=!1,a=null;setInterval(()=>{if(window.Howl&&a!==window.Howl.prototype){a=window.Howl.prototype;const o=window.Howl.prototype.play;window.Howl.prototype.play=function(n){try{if(!n){var s;const o=String(this._src||(null===(s=this._parent)||void 0===s?void 0:s._src)||"").trim();""!==o&&(r=!0,e(t,o))}}catch(t){}return o.call(this,n)}}},50);const l=window.fetch,p=URL.createObjectURL;let d=new WeakMap,u={};URL.createObjectURL=function(t){return((e=t)instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e))&&d.has(t)?d.get(t):p.call(this,t);var e},window.fetch=function(t,e){return l.call(this,t,e).then(t=>{const e=t.clone();return t.blob().then(o=>{if(0===o.type.indexOf("audio")){const n=URL.createObjectURL(o);d.set(o,n),u[n]=t.url;const s=t=>(t.blob=async()=>o,t.clone=function(){return s(Response.prototype.clone.call(this))},t);s(e)}return e}).catch(()=>e)})};const h=Audio.prototype.play;Audio.prototype.play=function(){if(!r)try{e(t,u[this.src]?u[this.src]:this.src)}catch(t){}return h.call(this)}}();
