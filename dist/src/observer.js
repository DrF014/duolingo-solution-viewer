!function(){"use strict";const t="sound_played";function e(t,e){window.postMessage({type:"_duo-sv_-ui_event_notification_",event:t,value:e},"*")}const n=Array.isArray,o=t=>"object"==typeof t&&!!t&&!n(t);const s=/\/[\d]{4}-[\d]{2}-[\d]{2}\/sessions/g,c=/\/comments\/([\d]+)/g,i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,n,r,l,a){const p=n.match(s),d=n.match(c);return(p||d)&&this.addEventListener("load",()=>{try{const t=o(this.response)?this.response:JSON.parse(this.responseText);o(t)&&(p?e("session_loaded",t):t.id>0&&t.sentence_id&&t.sentence_language&&e("discussion_loaded",{commentId:Number(t.id),discussionId:String(t.sentence_id).trim(),locale:String(t.sentence_language).trim()}))}catch(t){}}),i.call(this,t,n,r,l,a)};let r=!1,l=null;setInterval(()=>{if(window.Howl&&l!==window.Howl.prototype){l=window.Howl.prototype;const n=window.Howl.prototype.play;window.Howl.prototype.play=function(o){try{if(!o){var s;const n=String(this._src||(null===(s=this._parent)||void 0===s?void 0:s._src)||"").trim();""!==n&&(r=!0,e(t,n))}}catch(t){}return n.call(this,o)}}},50);const a=window.fetch,p=URL.createObjectURL;let d=new WeakMap,u={};URL.createObjectURL=function(t){return((e=t)instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e))&&d.has(t)?d.get(t):p.call(this,t);var e},window.fetch=function(t,e){return a.call(this,t,e).then(t=>{const e=t.clone();return t.blob().then(n=>{if(0===n.type.indexOf("audio")){const o=URL.createObjectURL(n);d.set(n,o),u[o]=t.url;const s=t=>(t.blob=async()=>n,t.clone=function(){return s(Response.prototype.clone.call(this))},t);s(e)}return e}).catch(()=>e)})};const h=Audio.prototype.play;Audio.prototype.play=function(){if(!r)try{e(t,u[this.src]?u[this.src]:this.src)}catch(t){}return h.call(this)}}();
